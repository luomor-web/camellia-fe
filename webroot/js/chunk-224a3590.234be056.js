(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-224a3590"],{"85ee":function(e,t,n){(function(t){var n=1/0,i=9007199254740991,c="[object Arguments]",r="[object Function]",l="[object GeneratorFunction]",o="[object Symbol]",a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,h=a||s||Function("return this")();function u(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function d(e,t){var n=-1,i=e?e.length:0,c=Array(i);while(++n<i)c[n]=t(e[n],n,e);return c}function f(e,t){var n=-1,i=t.length,c=e.length;while(++n<i)e[c+n]=t[n];return e}var y=Object.prototype,p=y.hasOwnProperty,k=y.toString,m=h.Symbol,v=y.propertyIsEnumerable,b=m?m.isConcatSpreadable:void 0,g=Math.max;function K(e,t,n,i,c){var r=-1,l=e.length;n||(n=C),c||(c=[]);while(++r<l){var o=e[r];t>0&&n(o)?t>1?K(o,t-1,n,i,c):f(c,o):i||(c[c.length]=o)}return c}function x(e,t){return e=Object(e),w(e,t,(function(t,n){return n in e}))}function w(e,t,n){var i=-1,c=t.length,r={};while(++i<c){var l=t[i],o=e[l];n(o,l)&&(r[l]=o)}return r}function j(e,t){return t=g(void 0===t?e.length-1:t,0),function(){var n=arguments,i=-1,c=g(n.length-t,0),r=Array(c);while(++i<c)r[i]=n[t+i];i=-1;var l=Array(t+1);while(++i<t)l[i]=n[i];return l[t]=r,u(e,this,l)}}function C(e){return F(e)||A(e)||!!(b&&e&&e[b])}function S(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function A(e){return T(e)&&p.call(e,"callee")&&(!v.call(e,"callee")||k.call(e)==c)}var F=Array.isArray;function O(e){return null!=e&&E(e.length)&&!L(e)}function T(e){return _(e)&&O(e)}function L(e){var t=I(e)?k.call(e):"";return t==r||t==l}function E(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function I(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function $(e){return"symbol"==typeof e||_(e)&&k.call(e)==o}var D=j((function(e,t){return null==e?{}:x(e,d(K(t,1),S))}));e.exports=D}).call(this,n("2409"))},dad5:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"5%",height:"95%"},attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticClass:"drawer-bootom-button"},[t("a-dropdown",{attrs:{trigger:["click"],placement:"topCenter"}},[t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{key:"1",on:{click:function(t){return e.switchCheckStrictly(1)}}},[e._v("父子关联")]),t("a-menu-item",{key:"2",on:{click:function(t){return e.switchCheckStrictly(2)}}},[e._v("取消关联")]),t("a-menu-item",{key:"3",on:{click:e.checkALL}},[e._v("全部勾选")]),t("a-menu-item",{key:"4",on:{click:e.cancelCheckALL}},[e._v("取消全选")]),t("a-menu-item",{key:"5",on:{click:e.expandAll}},[e._v("展开所有")]),t("a-menu-item",{key:"6",on:{click:e.closeAll}},[e._v("合并所有")])],1),t("a-button",[e._v("\n            树操作 "),t("a-icon",{attrs:{type:"up"}})],1)],1)],1),t("a-col",{attrs:{md:10,sm:24}},[[t("a-tree",{attrs:{checkable:"",multiple:"",selectedKeys:e.selectedKeys,checkedKeys:e.checkedKeys,treeData:e.roleFunctionTree,checkStrictly:e.checkStrictly,expandedKeys:e.iExpandedKeys,autoExpandParent:!0},on:{check:e.onCheck,expand:e.onExpand}})]],2)],1)],1)],1)},c=[],r=n("85ee"),l=n.n(r),o=n("ac0d"),a=n("4ec3"),s=n("0fea"),h={name:"RoleFunctionModal",mixins:[o["b"]],data:function(){return{title:"操作",width:"800px",visible:!1,model:{},roleId:0,iExpandedKeys:[],roleFunctionTree:[],checkedKeys:[],selectedKeys:[],checkStrictly:!1,hiding:!0,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this)}},created:function(){},methods:{edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},{}),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"name","type","description"))})),this.roleId=e.id,this.checkedKeys=[],this.loadTree(e.id)},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(n,i){if(!n){t.confirmLoading=!0;var c,r=Object.assign(e.model,i);r.type="RoleFunctions",r.keyId=e.roleId,r.value=e.checkedKeys,Object(a["D"])({type:"RoleFunctions",keyId:e.roleId}).then((function(n){n.data&&n.data.id?(r.id=n.data.id,c=Object(a["S"])(r)):c=Object(a["m"])(r),c.then((function(n){200===n.code?t.$emit("ok",e.roleId):t.$message.warning(n.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))}}))},handleCancel:function(){this.close()},loadTree:function(e){var t=this,n=this;n.treeData=[],n.roleFunctionTree=[];Object(s["c"])("/function/findRoleFunction?UBType=RoleFunctions&UBKeyId="+e).then((function(e){if(e){t.allTreeKeys=[];for(var i=0;i<e.length;i++){var c=e[i];n.treeData.push(c),n.roleFunctionTree.push(c),n.setThisExpandedKeys(c),n.getAllKeys(c)}t.loading=!1}}))},onCheck:function(e,t){this.hiding=!1,this.checkStrictly?this.checkedKeys=e.checked:this.checkedKeys=e},setThisExpandedKeys:function(e){if(1==e.checked&&this.checkedKeys.push(e.key),e.children&&e.children.length>0){this.iExpandedKeys.push(e.key);for(var t=0;t<e.children.length;t++)this.setThisExpandedKeys(e.children[t])}},getAllKeys:function(e){if(this.allTreeKeys.push(e.key),e.children&&e.children.length>0)for(var t=0;t<e.children.length;t++)this.getAllKeys(e.children[t])},expandAll:function(){this.iExpandedKeys=this.allTreeKeys},closeAll:function(){this.iExpandedKeys=[]},checkALL:function(){this.checkStriccheckStrictlytly=!1,this.checkedKeys=this.allTreeKeys},cancelCheckALL:function(){this.checkedKeys=[]},switchCheckStrictly:function(e){1==e?this.checkStrictly=!1:2==e&&(this.checkStrictly=!0)},onExpand:function(e){this.iExpandedKeys=e}}},u=h,d=n("e607"),f=Object(d["a"])(u,i,c,!1,null,"636863ba",null);t["default"]=f.exports}}]);