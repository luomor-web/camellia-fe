(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a19eedb","chunk-65088f60"],{"0b17":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("j-modal",{style:e.modalStyle,attrs:{title:e.title,width:e.width,visible:e.visible,maskClosable:!1,keyboard:!1,forceRender:!0,wrapClassName:"ant-modal-cust-warp"},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},["收预付款"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#advanceInPrint",expression:"'#advanceInPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),"转账"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#giroPrint",expression:"'#giroPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),"收入"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#itemInPrint",expression:"'#itemInPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),"支出"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#itemOutPrint",expression:"'#itemOutPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),"收款"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#moneyInPrint",expression:"'#moneyInPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),"付款"===e.financialType?t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#moneyOutPrint",expression:"'#moneyOutPrint'"}],attrs:{ghost:"",type:"primary"}},[e._v("打印")]):e._e(),e.checkFlag&&e.isCanBackCheck&&"1"===e.model.status?t("a-button",{on:{click:function(t){return e.handleBackCheck()}}},[e._v("反审核")]):e._e(),t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("取消")])],1),t("a-form",{attrs:{form:e.form}},["收预付款"===e.financialType?[t("section",{ref:"print",attrs:{id:"advanceInPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"付款会员"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.organName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.advanceInColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"合计金额"}},[e._v("\n              "+e._s(e.model.totalPrice)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"收款金额"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1),t("a-col",{attrs:{span:6}}),t("a-col",{attrs:{span:6}}),t("a-col",{attrs:{span:6}})],1)],1)]:e._e(),"转账"===e.financialType?[t("section",{ref:"print",attrs:{id:"giroPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1),t("a-col",{attrs:{span:6}})],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.giroColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"付款账户"}},[e._v("\n              "+e._s(e.model.accountName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"实付金额"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1),t("a-col",{attrs:{span:6}}),t("a-col",{attrs:{span:6}})],1)],1)]:e._e(),"收入"===e.financialType?[t("section",{ref:"print",attrs:{id:"itemInPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"往来单位"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.organName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.itemInColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"收入账户"}},[e._v("\n              "+e._s(e.model.accountName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"收入金额"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1),t("a-col",{attrs:{span:6}}),t("a-col",{attrs:{span:6}})],1)],1)]:e._e(),"支出"===e.financialType?[t("section",{ref:"print",attrs:{id:"itemOutPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"往来单位"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.organName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.itemOutColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支出账户"}},[e._v("\n              "+e._s(e.model.accountName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支出金额"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1),t("a-col",{attrs:{span:6}}),t("a-col",{attrs:{span:6}})],1)],1)]:e._e(),"收款"===e.financialType?[t("section",{ref:"print",attrs:{id:"moneyInPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"客户"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.organName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.moneyInColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"收款账户"}},[e._v("\n              "+e._s(e.model.accountName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"合计收款"}},[e._v("\n              "+e._s(e.model.totalPrice)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"优惠金额"}},[e._v("\n              "+e._s(e.model.discountMoney)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"实际收款"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1)],1)],1)]:e._e(),"付款"===e.financialType?[t("section",{ref:"print",attrs:{id:"moneyOutPrint"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"供应商"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{hidden:""}}),e._v("\n              "+e._s(e.model.organName)+"\n            ")],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"财务人员"}},[e._v("\n              "+e._s(e.model.handsPersonName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[e._v("\n              "+e._s(e.model.billTimeStr)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[e._v("\n              "+e._s(e.model.billNo)+"\n            ")])],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",pagination:!1,columns:e.moneyOutColumns,dataSource:e.dataSource}}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{staticStyle:{padding:"20px 10px"},attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[e._v("\n              "+e._s(e.model.remark)+"\n            ")])],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"付款账户"}},[e._v("\n              "+e._s(e.model.accountName)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"合计付款"}},[e._v("\n              "+e._s(e.model.totalPrice)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"优惠金额"}},[e._v("\n              "+e._s(e.model.discountMoney)+"\n            ")])],1),t("a-col",{attrs:{span:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"实际付款"}},[e._v("\n              "+e._s(e.model.changeAmount)+"\n            ")])],1)],1)],1)]:e._e(),e.fileList&&e.fileList.length>0?[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}},label:"附件"}},[t("j-upload",{attrs:{bizPath:"bill",disabled:!0,buttonVisible:!1},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1),t("a-col",{attrs:{span:12}})],1)]:e._e()],2)],2)},r=[],o=a("85ee"),n=a.n(o),i=a("0fea"),s=a("4ec3"),p=a("ca00"),m=a("cf74"),d={name:"FinancialDetail",components:{JUpload:m["default"]},data:function(){return{title:"详情",width:"1600px",visible:!1,modalStyle:"",model:{},isCanBackCheck:!0,financialType:"",fileList:[],checkFlag:!0,labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),loading:!1,dataSource:[],url:{detailList:"/accountItem/getDetailList",batchSetStatusUrl:"/accountHead/batchSetStatus"},advanceInColumns:[{title:"账户名称",dataIndex:"accountName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],giroColumns:[{title:"账户名称",dataIndex:"accountName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],itemInColumns:[{title:"收入项目",dataIndex:"inOutItemName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],itemOutColumns:[{title:"支出项目",dataIndex:"inOutItemName",width:"30%"},{title:"金额",dataIndex:"eachAmount",width:"30%"},{title:"备注",dataIndex:"remark",width:"30%"}],moneyInColumns:[{title:"销售单据编号",dataIndex:"billNumber",width:"20%"},{title:"应收欠款",dataIndex:"needDebt",width:"10%"},{title:"已收欠款",dataIndex:"finishDebt",width:"10%"},{title:"本次收款",dataIndex:"eachAmount",width:"10%"},{title:"备注",dataIndex:"remark",width:"20%"}],moneyOutColumns:[{title:"采购单据编号",dataIndex:"billNumber",width:"20%"},{title:"应付欠款",dataIndex:"needDebt",width:"10%"},{title:"已付欠款",dataIndex:"finishDebt",width:"10%"},{title:"本次付款",dataIndex:"eachAmount",width:"10%"},{title:"备注",dataIndex:"remark",width:"20%"}]}},created:function(){var e=window.screen.width;this.width=e<1500?"1200px":"1550px"},methods:{show:function(e,t,a){var l=this;Object(s["Z"])({billNo:e.billNo}).then((function(e){if(e&&200===e.code){var r=e.data;l.financialType=t,l.prefixNo=a,l.fileList=r.fileName,l.visible=!0,l.modalStyle="top:20px;height: 95%;",l.model=Object.assign({},r),l.$nextTick((function(){l.form.setFieldsValue(n()(l.model,"id"))}));var o={headerId:l.model.id},i=(l.readOnly,l.url.detailList);l.requestSubTableData(i,o),l.getSystemConfig()}}))},requestSubTableData:function(e,t,a){var l=this;this.loading=!0,Object(i["c"])(e,t).then((function(e){e&&200===e.code&&(l.dataSource=e.data.rows,"function"===typeof a&&a(e))})).finally((function(){l.loading=!1}))},getSystemConfig:function(){var e=this;Object(s["fb"])().then((function(t){if(200===t.code&&t.data){var a=t.data.multiBillType,l=t.data.multiLevelApprovalFlag;e.checkFlag=Object(p["f"])(a,l,e.prefixNo)}}))},handleBackCheck:function(){var e=this;this.$confirm({title:"确认操作",content:"是否对该单据进行反审核?",onOk:function(){e.loading=!0,Object(i["f"])(e.url.batchSetStatusUrl,{status:"0",ids:e.model.id}).then((function(t){200===t.code?(e.$emit("ok"),e.loading=!1,e.close()):(e.$message.warning(t.data.message),e.loading=!1)})).finally((function(){}))}})},handleCancel:function(){this.close()},close:function(){this.$emit("close"),this.visible=!1,this.modalStyle=""}}},c=d,u=a("e607"),f=Object(u["a"])(c,l,r,!1,null,"56b438a0",null);t["default"]=f.exports},"3d9e":function(e,t,a){"use strict";a("790b")},"790b":function(e,t,a){},"85ee":function(e,t,a){(function(t){var a=1/0,l=9007199254740991,r="[object Arguments]",o="[object Function]",n="[object GeneratorFunction]",i="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,m=s||p||Function("return this")();function d(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function c(e,t){var a=-1,l=e?e.length:0,r=Array(l);while(++a<l)r[a]=t(e[a],a,e);return r}function u(e,t){var a=-1,l=t.length,r=e.length;while(++a<l)e[r+a]=t[a];return e}var f=Object.prototype,b=f.hasOwnProperty,h=f.toString,C=m.Symbol,w=f.propertyIsEnumerable,v=C?C.isConcatSpreadable:void 0,g=Math.max;function y(e,t,a,l,r){var o=-1,n=e.length;a||(a=N),r||(r=[]);while(++o<n){var i=e[o];t>0&&a(i)?t>1?y(i,t-1,a,l,r):u(r,i):l||(r[r.length]=i)}return r}function _(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var l=-1,r=t.length,o={};while(++l<r){var n=t[l],i=e[n];a(i,n)&&(o[n]=i)}return o}function I(e,t){return t=g(void 0===t?e.length-1:t,0),function(){var a=arguments,l=-1,r=g(a.length-t,0),o=Array(r);while(++l<r)o[l]=a[t+l];l=-1;var n=Array(t+1);while(++l<t)n[l]=a[l];return n[t]=o,d(e,this,n)}}function N(e){return k(e)||L(e)||!!(v&&e&&e[v])}function S(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function L(e){return P(e)&&b.call(e,"callee")&&(!w.call(e,"callee")||h.call(e)==r)}var k=Array.isArray;function O(e){return null!=e&&j(e.length)&&!T(e)}function P(e){return F(e)&&O(e)}function T(e){var t=A(e)?h.call(e):"";return t==o||t==n}function j(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return!!e&&"object"==typeof e}function z(e){return"symbol"==typeof e||F(e)&&h.call(e)==i}var D=I((function(e,t){return null==e?{}:_(e,c(y(t,1),S))}));e.exports=D}).call(this,a("2409"))},cf74:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+"\n      ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,width:1e3,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},r=[],o=a("1f37"),n=a("9fb0"),i=a("0fea"),s=a("4ec3"),p="all",m="image",d=function(){return"-"+parseInt(1e4*Math.random()+1,10)},c=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},u={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:"",sizeLimit:0}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:p},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===m},complistType:function(){return this.fileType===m?"picture-card":"text"}},created:function(){this.initFileSizeLimit();var e=o["a"].ls.get(n["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileSizeLimit:function(){var e=this;Object(s["T"])().then((function(t){200===t.code&&(e.sizeLimit=t.data)}))},initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++){var l=Object(i["d"])(e[a].filePath);t.push({uid:d(),name:e[a].fileName,status:"done",url:l,response:{code:"history",data:e[a].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),l=0;l<a.length;l++){var r=Object(i["d"])("systemConfig/static/"+a[l]);t.push({uid:d(),name:c(a[l]),status:"done",url:r,response:{code:"history",data:a[l]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],l=0;l<e.length;l++)a.push(e[l].response.data);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type,a=e.size;if(this.fileType===m&&t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(a>this.sizeLimit){var l=(this.sizeLimit/1024/1024).toFixed(2);return this.$message.warning("抱歉，文件大小不能超过"+l+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),200===e.file.response.code&&(t=t.map((function(e){if(e.response){var t=e.response.data;e.url=Object(i["d"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<t.length;a++){var l={fileName:t[a].name,filePath:t[a].response.data,fileSize:t[a].size};this.newFileList.push(l)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){var t=e.name.substring(e.name.indexOf("."));".gif"===t||".jpg"===t||".jpeg"===t||".png"===t||".GIF"===t||".JPG"===t||".JPEG"===t||".PNG"===t?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,a=this.fileList[e-1].url,l=[],r=0;r<this.fileList.length;r++)r==e-1?l.push(t):r==e?l.push(a):l.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",l.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,a=this.fileList[e+1].url,l=[],r=0;r<this.fileList.length;r++)r==e+1?l.push(t):r==e?l.push(a):l.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",l.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var a=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];a&&a.length>0&&(a[0].addEventListener("mouseover",(function(t){t=t||window.event;var a=t.target||t.srcElement;if("ant-upload-list-item-info"==a.className){e.showMoverTask=!1;var l=a.parentElement;e.left=l.offsetLeft,e.top=l.offsetTop+l.offsetHeight-50,e.moveDisplay="block",e.currentImg=a.getElementsByTagName("img")[0].src}})),a[0].addEventListener("mouseout",(function(t){t=t||window.event;var a=t.target||t.srcElement;"ant-upload-list-item-info"==a.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=a.className&&"ant-upload-list ant-upload-list-picture-card"!=a.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},f=u,b=(a("3d9e"),a("e607")),h=Object(b["a"])(f,l,r,!1,null,null,null);t["default"]=h.exports}}]);