(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b68ca542","chunk-2d20ede5"],{b0cd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"选择部门",width:e.modalWidth,visible:e.visible,confirmLoading:e.confirmLoading,cancelText:"关闭"},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{tip:"Loading...",spinning:!1}},[t("a-input-search",{staticStyle:{"margin-bottom":"1px"},attrs:{placeholder:"请输入部门名称按回车进行搜索"},on:{search:e.onSearch}}),t("a-tree",{attrs:{checkable:"",treeData:e.treeData,checkStrictly:!0,autoExpandParent:e.autoExpandParent,expandedKeys:e.expandedKeys,checkedKeys:e.checkedKeys},on:{check:e.onCheck,select:e.onSelect,expand:e.onExpand},scopedSlots:e._u([{key:"title",fn:function(n){var i=n.title;return[i.indexOf(e.searchValue)>-1?t("span",[e._v("\n          "+e._s(i.substr(0,i.indexOf(e.searchValue)))+"\n          "),t("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n          "+e._s(i.substr(i.indexOf(e.searchValue)+e.searchValue.length))+"\n        ")]):t("span",[e._v(e._s(i))])]}}])})],1)],1)},a=[];function r(e){return c(e)||o(e)||l(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return h(e)}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function l(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u={name:"JSelectDepartModal",props:["modalWidth","multi","rootOpened","departId"],data:function(){return{visible:!1,confirmLoading:!1,treeData:[],autoExpandParent:!0,expandedKeys:[],dataList:[],checkedKeys:[],checkedRows:[],searchValue:""}},created:function(){},watch:{departId:function(){this.initDepartComponent()},visible:{handler:function(){this.departId?this.checkedKeys=this.departId.split(","):this.checkedKeys=[]}}},methods:{show:function(){this.visible=!0,this.checkedRows=[],this.checkedKeys=[]},initDepartComponent:function(){var e="";if(this.departId){var t,n=this.departId,i=d(this.dataList);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.indexOf(a.key)>=0&&(e+=","+a.title)}}catch(r){i.e(r)}finally{i.f()}e&&(e=e.substring(1))}this.$emit("initComp",e)},reWriterWithSlot:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.children&&i.children.length>0){this.reWriterWithSlot(i.children);var a=Object.assign({},i);a.children={},this.dataList.push(a)}else this.dataList.push(i),i.scopedSlots={title:"title"}}}catch(r){n.e(r)}finally{n.f()}},initExpandedKeys:function(e){if(e&&e.length>0){var t,n=[],i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.children&&a.children.length>0&&n.push(a.id)}}catch(r){i.e(r)}finally{i.f()}this.expandedKeys=[].concat(n)}else this.expandedKeys=[]},onCheck:function(e,t){var n=this;if(this.multi)this.checkedKeys=e.checked,this.checkedRows=this.getCheckedRows(this.checkedKeys);else{var i=e.checked.filter((function(e){return n.checkedKeys.indexOf(e)<0}));this.checkedKeys=r(i),this.checkedRows=0===this.checkedKeys.length?[]:[t.node.dataRef]}},onSelect:function(e,t){var n=[];if(n.push(e[0]),this.checkedKeys&&0!==this.checkedKeys.length&&this.multi){var i,a=t.node.dataRef.key;if(this.checkedKeys.indexOf(a)>=0)this.checkedKeys=this.checkedKeys.filter((function(e){return e!==a}));else(i=this.checkedKeys).push.apply(i,n)}else this.checkedKeys=[].concat(n),this.checkedRows=[t.node.dataRef];this.checkedRows=this.getCheckedRows(this.checkedKeys)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},handleSubmit:function(){this.checkedKeys&&0!=this.checkedKeys.length?this.$emit("ok",this.checkedRows,this.checkedKeys.join(",")):this.$emit("ok",""),this.handleClear()},handleCancel:function(){this.handleClear()},handleClear:function(){this.visible=!1,this.checkedKeys=[]},getParentKey:function(e,t){for(var n,i=0;i<t.length;i++){var a=t[i];a.children&&(a.children.some((function(t){return t.key===e}))?n=a.key:this.getParentKey(e,a.children)&&(n=this.getParentKey(e,a.children)))}return n},onSearch:function(e){var t=this,n=this.dataList.map((function(n){return n.title.indexOf(e)>-1?t.getParentKey(n.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:n,searchValue:e,autoExpandParent:!0})},getCheckedRows:function(e){var t,n=function e(t,n){var i,a=d(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(r.id===n)return r;if(r.children instanceof Array){var s=e(r.children,n);if(null!=s)return s}}}catch(o){a.e(o)}finally{a.f()}return null},i=[],a=d(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,s=n(this.treeData,r);null!=s&&i.push(s)}}catch(o){a.e(o)}finally{a.f()}return i}}},f=u,p=n("e607"),y=Object(p["a"])(f,i,a,!1,null,"30943766",null);t["default"]=y.exports},d43b8:function(e,t,n){"use strict";n("e7a0")},e7a0:function(e,t,n){},fe54:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"components-input-demo-presuffix"},[t("a-input",{attrs:{placeholder:"请点击选择部门",readOnly:"",disabled:e.disabled},on:{click:e.openModal},model:{value:e.departNames,callback:function(t){e.departNames=t},expression:"departNames"}},[t("a-icon",{attrs:{slot:"prefix",type:"cluster",title:"部门选择控件"},slot:"prefix"}),e.departIds?t("a-icon",{attrs:{slot:"suffix",type:"close-circle",title:"清空"},on:{click:e.handleEmpty},slot:"suffix"}):e._e()],1),t("j-select-depart-modal",{ref:"innerDepartSelectModal",attrs:{"modal-width":e.modalWidth,multi:e.multi,rootOpened:e.rootOpened,"depart-id":e.departIds},on:{ok:e.handleOK,initComp:e.initComp}})],1)},a=[],r=n("b0cd"),s={name:"JSelectDepart",components:{JSelectDepartModal:r["default"]},props:{modalWidth:{type:Number,default:500,required:!1},multi:{type:Boolean,default:!1,required:!1},rootOpened:{type:Boolean,default:!0,required:!1},value:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},customReturnField:{type:String,default:"id"}},data:function(){return{visible:!1,confirmLoading:!1,departNames:"",departIds:""}},mounted:function(){this.departIds=this.value},watch:{value:function(e){"id"===this.customReturnField&&(this.departIds=e)}},methods:{initComp:function(e){this.departNames=e},openModal:function(){this.$refs.innerDepartSelectModal.show()},handleOK:function(e,t){var n=this,i="";!e&&e.length<=0?(this.departNames="",this.departIds=""):(i=e.map((function(e){return e[n.customReturnField]})).join(","),this.departNames=e.map((function(e){return e["departName"]})).join(","),this.departIds=t),this.$emit("change",i)},getDepartNames:function(){return this.departNames},handleEmpty:function(){this.handleOK("")}},model:{prop:"value",event:"change"}},o=s,c=(n("d43b8"),n("e607")),d=Object(c["a"])(o,i,a,!1,null,"4d448922",null);t["default"]=d.exports}}]);