(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d8378"],{"79aa":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("div",{ref:"container"},[a("a-modal",{staticStyle:{top:"50px",height:"90%"},attrs:{title:e.title,width:1250,visible:e.visible,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{cancel:e.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1),a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:4,sm:24}},[a("a-form-item",{attrs:{label:e.organLabel,labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"},model:{value:e.queryParam.organId,callback:function(a){e.$set(e.queryParam,"organId",a)},expression:"queryParam.organId"}},e._l(e.supplierList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id}},[e._v("\n                  "+e._s(t.supplier)+"\n                ")])})),1)],1)],1),a("a-col",{attrs:{md:5,sm:24}},[a("a-form-item",{attrs:{label:"单号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入单据编号"},model:{value:e.queryParam.number,callback:function(a){e.$set(e.queryParam,"number",a)},expression:"queryParam.number"}})],1)],1),a("a-col",{attrs:{md:5,sm:24}},[a("a-form-item",{attrs:{label:"商品",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"条码|名称|规格|型号"},model:{value:e.queryParam.materialParam,callback:function(a){e.$set(e.queryParam,"materialParam",a)},expression:"queryParam.materialParam"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"单据日期",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:["开始时间","结束时间"]},on:{change:e.onDateChange,ok:e.onDateOk},model:{value:e.queryParam.createTimeRange,callback:function(a){e.$set(e.queryParam,"createTimeRange",a)},expression:"queryParam.createTimeRange"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:4,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.searchReset}},[e._v("重置")])],1)],1)],1)],1)],1),a("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"numberCustomRender",fn:function(t,r){return a("span",{},[a("a",{on:{click:function(a){return e.myHandleDetail(r)}}},[e._v(e._s(r.number))])])}},{key:"customRenderStatus",fn:function(t,r){return["0"===r.status?a("a-tag",{attrs:{color:"red"}},[e._v("未审核")]):e._e(),"1"===r.status?a("a-tag",{attrs:{color:"green"}},[e._v("已审核")]):e._e(),"2"===r.status&&"采购订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"cyan"}},[e._v("完成采购")]):e._e(),"2"===r.status&&"销售订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"cyan"}},[e._v("完成销售")]):e._e(),"3"===r.status&&"采购订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"blue"}},[e._v("部分采购")]):e._e(),"3"===r.status&&"销售订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"blue"}},[e._v("部分销售")]):e._e(),"9"===r.status&&"采购订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"orange"}},[e._v("审核中")]):e._e(),"9"===r.status&&"销售订单"===e.queryParam.subType?a("a-tag",{attrs:{color:"orange"}},[e._v("审核中")]):e._e()]}}])}),a("bill-detail",{ref:"billDetail"})],2)],1)},n=[],s=t("9be9"),l=t("b65a"),o=t("ac0d"),i=t("4ec3"),u=t("1f37"),c={name:"HistoryBillList",mixins:[l["a"],o["b"]],components:{BillDetail:s["default"]},data:function(){return{title:"历史单据",visible:!1,disableMixinCreated:!0,organLabel:"",supplierList:[],queryParam:{organId:"",number:"",materialParam:"",type:"",subType:"",roleType:u["a"].ls.get("roleType"),status:""},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},columns:[{title:"#",dataIndex:"",key:"rowIndex",width:40,align:"center",customRender:function(e,a,t){return parseInt(t)+1}},{title:"",dataIndex:"organName",width:120,ellipsis:!0},{title:"单据编号",dataIndex:"number",width:150,scopedSlots:{customRender:"numberCustomRender"}},{title:"商品信息",dataIndex:"materialsList",width:280,ellipsis:!0,customRender:function(e,a,t){if(e)return e.replace(",","，")}},{title:"单据日期",dataIndex:"operTimeStr",width:145},{title:"操作员",dataIndex:"userName",width:70},{title:"金额合计",dataIndex:"totalPrice",width:70},{title:"含税合计",dataIndex:"totalTaxLastMoney",width:70,customRender:function(e,a,t){return a.discountLastMoney?(a.discountMoney+a.discountLastMoney).toFixed(2):a.totalPrice}},{title:"状态",dataIndex:"status",width:70,align:"center",scopedSlots:{customRender:"customRenderStatus"}}],dataSource:[],url:{list:"/depotHead/list"}}},created:function(){},methods:{show:function(e,a,t,r){this.queryParam.type=e,this.queryParam.subType=a,this.columns[1].title=t,this.organLabel=t,this.model=Object.assign({},{}),this.visible=!0,this.loadSupplier(t,r),this.loadData(1)},loadSupplier:function(e,a){var t=this;"供应商"===e?Object(i["Y"])({}).then((function(e){e&&(t.supplierList=e,a&&(t.queryParam.organId=a,t.loadData(1)))})):"客户"===e&&Object(i["V"])({}).then((function(e){e&&(t.supplierList=e,a&&(t.queryParam.organId=a,t.loadData(1)))}))},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onDateChange:function(e,a){this.queryParam.beginTime=a[0],this.queryParam.endTime=a[1]},onDateOk:function(e){},searchReset:function(){this.queryParam={type:this.queryParam.type,subType:this.queryParam.subType,status:""},this.loadData(1)},myHandleDetail:function(e){var a=this;Object(i["U"])({number:e.number}).then((function(e){if(e&&200===e.code){var t=e.data.depotHeadType;t=t.replace("其它",""),a.$refs.billDetail.show(e.data,t),a.$refs.billDetail.title="详情"}}))}}},d=c,m=t("e607"),p=Object(m["a"])(d,r,n,!1,null,"30fbc0a4",null);a["default"]=p.exports}}]);