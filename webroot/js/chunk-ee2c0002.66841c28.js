(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee2c0002","chunk-65088f60","chunk-bacb0958","chunk-409ba5dc","chunk-203995bb"],{"3d9e":function(e,t,a){"use strict";a("790b")},"58b1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"30%",height:"35%"},attrs:{title:e.title,width:500,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"batchSetDepot"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["depotId",e.validatorRules.depotId],expression:"[ 'depotId', validatorRules.depotId ]"}],attrs:{placeholder:"请选择仓库",showSearch:"",optionFilterProp:"children"}},e._l(e.depotList,(function(a,r){return t("a-select-option",{attrs:{value:a.id}},[e._v("\n              "+e._s(a.depotName)+"\n            ")])})),1)],1)],1)],1)],2)],1)},i=[],o=a("85ee"),l=a.n(o),n=a("0fea"),s=a("ac0d"),d={name:"BatchSetDepot",mixins:[s["b"]],data:function(){return{title:"操作",visible:!1,model:{},depotList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{depotId:{rules:[{required:!0,message:"请选择仓库!"}]}}}},created:function(){},methods:{getDepotData:function(){var e=this;Object(n["c"])("/depot/findDepotByCurrentUser").then((function(t){200===t.code?e.depotList=t.data:e.$message.info(t.data)}))},add:function(){this.edit({}),this.getDepotData()},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"depotId"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i=Object.assign(e.model,r),o=i.depotId;t.$emit("ok",o),t.confirmLoading=!1,t.close()}}))},handleCancel:function(){this.close()}}},c=d,m=a("e607"),p=Object(m["a"])(c,r,i,!1,null,"54ab67bc",null);t["default"]=p.exports},"648d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"10%",height:"80%"},attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"customerModal"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["supplier",e.validatorRules.supplier],expression:"[ 'supplier', validatorRules.supplier]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入名称"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"联系人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["contacts"],expression:"[ 'contacts' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入联系人"}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机号码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["telephone"],expression:"[ 'telephone' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入手机号码"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"联系电话"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["phoneNum"],expression:"[ 'phoneNum' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入联系电话"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"电子邮箱"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["email"],expression:"[ 'email' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入电子邮箱"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"传真"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["fax"],expression:"[ 'fax' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入传真"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"期初应收"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["beginNeedGet"],expression:"[ 'beginNeedGet' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入期初应收"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"期末应收"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["allNeedGet"],expression:"[ 'allNeedGet' ]",modifiers:{trim:!0}}],attrs:{readOnly:!0}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"纳税人识别号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["taxNum"],expression:"[ 'taxNum' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入纳税人识别号"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"税率(%)"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["taxRate"],expression:"[ 'taxRate' ]",modifiers:{trim:!0}}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入税率"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"开户行"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["bankName"],expression:"[ 'bankName' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入开户行"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"账号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["accountNumber"],expression:"[ 'accountNumber' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入账号"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"地址"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["address"],expression:"[ 'address' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入地址"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["description"],expression:"[ 'description' ]",modifiers:{trim:!0}}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],1)],1)],2)],1)},i=[],o=a("85ee"),l=a.n(o),n=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"CustomerModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{supplier:{rules:[{required:!0,message:"请输入名称!"},{min:2,max:60,message:"长度在 2 到 60 个字符",trigger:"blur"},{validator:this.validateSupplierName}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"supplier","contacts","telephone","email","phoneNum","fax","beginNeedGet","allNeedGet","taxNum","taxRate","bankName","accountNumber","address","sort","description")),Object(s["a"])("customerModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,o=Object.assign(e.model,r);if(e.model.beginNeedGet&&e.model.beginNeedPay)return t.$message.warn("期初应收和期初应付不能同时输入"),void(t.confirmLoading=!1);o.type="客户",i=e.model.id?Object(n["N"])(o):Object(n["i"])(o),i.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateSupplierName:function(e,t,a){var r={name:t,type:"客户",id:this.model.id?this.model.id:0};Object(n["B"])(r).then((function(e){e&&200===e.code?e.data.status?a("名称已经存在"):a():a(e.data)}))}}},m=c,p=a("e607"),u=Object(p["a"])(m,r,i,!1,null,"47a26454",null);t["default"]=u.exports},"790b":function(e,t,a){},"85ee":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,i="[object Arguments]",o="[object Function]",l="[object GeneratorFunction]",n="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,c=s||d||Function("return this")();function m(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function p(e,t){var a=-1,r=e?e.length:0,i=Array(r);while(++a<r)i[a]=t(e[a],a,e);return i}function u(e,t){var a=-1,r=t.length,i=e.length;while(++a<r)e[i+a]=t[a];return e}var f=Object.prototype,h=f.hasOwnProperty,v=f.toString,b=c.Symbol,g=f.propertyIsEnumerable,w=b?b.isConcatSpreadable:void 0,y=Math.max;function C(e,t,a,r,i){var o=-1,l=e.length;a||(a=N),i||(i=[]);while(++o<l){var n=e[o];t>0&&a(n)?t>1?C(n,t-1,a,r,i):u(i,n):r||(i[i.length]=n)}return i}function x(e,t){return e=Object(e),k(e,t,(function(t,a){return a in e}))}function k(e,t,a){var r=-1,i=t.length,o={};while(++r<i){var l=t[r],n=e[l];a(n,l)&&(o[l]=n)}return o}function L(e,t){return t=y(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,i=y(a.length-t,0),o=Array(i);while(++r<i)o[r]=a[t+r];r=-1;var l=Array(t+1);while(++r<t)l[r]=a[r];return l[t]=o,m(e,this,l)}}function N(e){return I(e)||O(e)||!!(w&&e&&e[w])}function S(e){if("string"==typeof e||M(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function O(e){return T(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==i)}var I=Array.isArray;function j(e){return null!=e&&D(e.length)&&!_(e)}function T(e){return $(e)&&j(e)}function _(e){var t=F(e)?v.call(e):"";return t==o||t==l}function D(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return!!e&&"object"==typeof e}function M(e){return"symbol"==typeof e||$(e)&&v.call(e)==n}var R=L((function(e,t){return null==e?{}:x(e,p(C(t,1),S))}));e.exports=R}).call(this,a("2409"))},ae84:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("j-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,keyboard:!1,forceRender:!0,switchFullscreen:""},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v("取消")]),e.checkFlag&&e.isCanCheck?t("a-button",{attrs:{loading:e.confirmLoading},on:{click:e.handleOkAndCheck}},[e._v("保存并审核")]):e._e(),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleOk}},[e._v("保存")]),e.checkFlag?e._e():t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleWorkflow()}}},[e._v("提交流程")])],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"客户"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["organId"],expression:"[ 'organId' ]"}],attrs:{placeholder:"选择客户",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"},scopedSlots:e._u([{key:"dropdownRender",fn:function(a){return t("div",{},[t("v-nodes",{attrs:{vnodes:a}}),t("a-divider",{staticStyle:{margin:"4px 0"}}),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:e.addCustomer}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增客户")],1):e._e()],1)}}])},e._l(e.cusList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v("\n                "+e._s(a.supplier)+"\n              ")])})),1)],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[t("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["operTime",e.validatorRules.operTime],expression:"['operTime', validatorRules.operTime]"}],attrs:{"show-time":!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["number"],expression:"[ 'number' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入单据编号",readOnly:!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}})],1),t("j-editable-table",{ref:e.refKeys[0],attrs:{id:"billModal",loading:e.materialTable.loading,columns:e.materialTable.columns,dataSource:e.materialTable.dataSource,minWidth:e.minWidth,maxHeight:300,rowNumber:!1,rowSelection:!0,actionButton:!0,dragSort:!0},on:{valueChange:e.onValueChange,added:e.onAdded,deleted:e.onDeleted},scopedSlots:e._u([{key:"buttonAfter",fn:function(){return[t("a-row",{staticStyle:{float:"left"},attrs:{gutter:24,"data-step":"4","data-title":"扫码录入","data-intro":"此功能支持扫码枪扫描商品条码进行录入"}},[e.scanStatus?t("a-col",{attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.scanEnter}},[e._v("扫码录入")])],1):e._e(),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0 6px 0 12px"},attrs:{md:16,sm:24}},[t("a-input",{ref:"scanBarCode",attrs:{placeholder:"请扫条码或序列号并回车"},on:{pressEnter:e.scanPressEnter},model:{value:e.scanBarCode,callback:function(t){e.scanBarCode=t},expression:"scanBarCode"}})],1),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0px 24px 0 0"},attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.stopScan}},[e._v("收起扫码")])],1)],1)]},proxy:!0},{key:"depotBatchSet",fn:function(){return[t("a-icon",{attrs:{type:"down"},on:{click:e.handleBatchSetDepot}})]},proxy:!0},{key:"depotAdd",fn:function(){return[e.isTenant?t("a-divider",{staticStyle:{margin:"4px 0"}}):e._e(),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{click:e.addDepot}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增仓库")],1):e._e()]},proxy:!0}])}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],staticStyle:{"margin-top":"8px"},attrs:{rows:1,placeholder:"请输入备注"}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"附件"}},[t("j-upload",{attrs:{bizPath:"bill"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)],1)],1)],1),t("customer-modal",{ref:"customerModalForm",on:{ok:e.customerModalFormOk}}),t("depot-modal",{ref:"depotModalForm",on:{ok:e.depotModalFormOk}}),t("batch-set-depot",{ref:"batchSetDepotModalForm",on:{ok:e.batchSetDepotModalFormOk}}),t("workflow-iframe",{ref:"modalWorkflow"})],2)},i=[],o=a("85ee"),l=a.n(o),n=a("648d"),s=a("e561"),d=a("58b1"),c=a("9cf1"),m=a("e2e0"),p=a("d0ed"),u=a("80fd"),f=a("ca00"),h=a("cf74"),v=a("2dab"),b=a("1f37");function g(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=w(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){n=!0,o=e},f:function(){try{l||null==a.return||a.return()}finally{if(n)throw o}}}}function w(e,t){if(e){if("string"===typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var C={name:"OtherOutModal",mixins:[p["a"],u["BillModalMixin"]],components:{CustomerModal:n["default"],DepotModal:s["default"],BatchSetDepot:d["default"],WorkflowIframe:c["default"],JUpload:h["default"],JDate:v["default"],VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{title:"操作",width:"1600px",moreStatus:!1,addDefaultRowNum:1,visible:!1,operTimeStr:"",prefixNo:"QTCK",fileList:[],model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},refKeys:["materialDataTable"],activeKey:"materialDataTable",materialTable:{loading:!1,dataSource:[],columns:[{title:"仓库名称",key:"depotId",width:"8%",type:m["a"].select,placeholder:"请选择${title}",options:[],allowSearch:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"条码",key:"barCode",width:"12%",type:m["a"].popupJsh,kind:"material",multi:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"名称",key:"name",width:"10%",type:m["a"].normal},{title:"规格",key:"standard",width:"9%",type:m["a"].normal},{title:"型号",key:"model",width:"9%",type:m["a"].normal},{title:"颜色",key:"color",width:"5%",type:m["a"].normal},{title:"扩展信息",key:"materialOther",width:"5%",type:m["a"].normal},{title:"库存",key:"stock",width:"5%",type:m["a"].normal},{title:"单位",key:"unit",width:"4%",type:m["a"].normal},{title:"序列号",key:"snList",width:"12%",type:m["a"].popupJsh,kind:"sn",multi:!0},{title:"批号",key:"batchNumber",width:"7%",type:m["a"].popupJsh,kind:"batch",multi:!1},{title:"有效期",key:"expirationDate",width:"7%",type:m["a"].input,readonly:!0},{title:"多属性",key:"sku",width:"9%",type:m["a"].normal},{title:"数量",key:"operNumber",width:"5%",type:m["a"].inputNumber,statistics:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"单价",key:"unitPrice",width:"5%",type:m["a"].inputNumber},{title:"金额",key:"allPrice",width:"5%",type:m["a"].inputNumber,statistics:!0},{title:"备注",key:"remark",width:"5%",type:m["a"].input}]},confirmLoading:!1,validatorRules:{operTime:{rules:[{required:!0,message:"请输入单据日期!"}]},type:{rules:[{required:!0,message:"请选择类型!"}]}},url:{add:"/depotHead/addDepotHeadAndDetail",edit:"/depotHead/updateDepotHeadAndDetail",detailList:"/depotItem/getDetailList"}}},created:function(){},methods:{editAfter:function(){var e=this;if(this.billStatus="0",this.currentSelectDepotId="",this.changeColumnHide(),this.changeFormTypes(this.materialTable.columns,"snList",0),this.changeFormTypes(this.materialTable.columns,"batchNumber",0),this.changeFormTypes(this.materialTable.columns,"expirationDate",0),"add"===this.action)this.addInit(this.prefixNo),this.fileList=[];else{this.model.operTime=this.model.operTimeStr,this.fileList=this.model.fileName,this.$nextTick((function(){e.form.setFieldsValue(l()(e.model,"organId","operTime","number","remark","discount","discountMoney","discountLastMoney","otherMoney","accountId","changeAmount"))}));var t={headerId:this.model.id,mpList:Object(f["g"])(b["a"].ls.get("materialPropertyList")),linkType:"basic"},a=(this.readOnly,this.url.detailList);this.requestSubTableData(a,t,this.materialTable)}"copyAdd"===this.action&&(this.model.id="",this.model.tenantId="",this.copyAddInit(this.prefixNo)),this.initSystemConfig(),this.initCustomer(),this.initDepot()},classifyIntoFormData:function(e){var t=0,a=Object.assign(this.model,e.formValue),r=e.tablesValue[0].values;a.type="出库",a.subType="其它",a.defaultNumber=a.number;var i,o=g(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;t+=l.allPrice-0}}catch(n){o.e(n)}finally{o.f()}return a.totalPrice=t,this.fileList&&this.fileList.length>0?a.fileName=this.fileList:a.fileName="",this.model.id&&(a.id=this.model.id),a.status=this.billStatus,{info:JSON.stringify(a),rows:JSON.stringify(r)}}}},x=C,k=a("e607"),L=Object(k["a"])(x,r,i,!1,null,"6a97b2e3",null);t["default"]=L.exports},cf74:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+"\n      ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,width:1e3,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],o=a("1f37"),l=a("9fb0"),n=a("0fea"),s=a("4ec3"),d="all",c="image",m=function(){return"-"+parseInt(1e4*Math.random()+1,10)},p=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},u={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:"",sizeLimit:0}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:d},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===c},complistType:function(){return this.fileType===c?"picture-card":"text"}},created:function(){this.initFileSizeLimit();var e=o["a"].ls.get(l["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileSizeLimit:function(){var e=this;Object(s["T"])().then((function(t){200===t.code&&(e.sizeLimit=t.data)}))},initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++){var r=Object(n["d"])(e[a].filePath);t.push({uid:m(),name:e[a].fileName,status:"done",url:r,response:{code:"history",data:e[a].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),r=0;r<a.length;r++){var i=Object(n["d"])("systemConfig/static/"+a[r]);t.push({uid:m(),name:p(a[r]),status:"done",url:i,response:{code:"history",data:a[r]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],r=0;r<e.length;r++)a.push(e[r].response.data);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type,a=e.size;if(this.fileType===c&&t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(a>this.sizeLimit){var r=(this.sizeLimit/1024/1024).toFixed(2);return this.$message.warning("抱歉，文件大小不能超过"+r+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),200===e.file.response.code&&(t=t.map((function(e){if(e.response){var t=e.response.data;e.url=Object(n["d"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<t.length;a++){var r={fileName:t[a].name,filePath:t[a].response.data,fileSize:t[a].size};this.newFileList.push(r)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){var t=e.name.substring(e.name.indexOf("."));".gif"===t||".jpg"===t||".jpeg"===t||".png"===t||".GIF"===t||".JPG"===t||".JPEG"===t||".PNG"===t?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,a=this.fileList[e-1].url,r=[],i=0;i<this.fileList.length;i++)i==e-1?r.push(t):i==e?r.push(a):r.push(this.fileList[i].url);this.currentImg=a,this.$emit("change",r.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,a=this.fileList[e+1].url,r=[],i=0;i<this.fileList.length;i++)i==e+1?r.push(t):i==e?r.push(a):r.push(this.fileList[i].url);this.currentImg=a,this.$emit("change",r.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var a=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];a&&a.length>0&&(a[0].addEventListener("mouseover",(function(t){t=t||window.event;var a=t.target||t.srcElement;if("ant-upload-list-item-info"==a.className){e.showMoverTask=!1;var r=a.parentElement;e.left=r.offsetLeft,e.top=r.offsetTop+r.offsetHeight-50,e.moveDisplay="block",e.currentImg=a.getElementsByTagName("img")[0].src}})),a[0].addEventListener("mouseout",(function(t){t=t||window.event;var a=t.target||t.srcElement;"ant-upload-list-item-info"==a.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=a.className&&"ant-upload-list ant-upload-list-picture-card"!=a.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},f=u,h=(a("3d9e"),a("e607")),v=Object(h["a"])(f,r,i,!1,null,null,null);t["default"]=v.exports},e561:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"10%",height:"70%"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"depotModal"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库名称"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库地址"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["address"],expression:"[ 'address' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库地址"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓储费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["warehousing"],expression:"[ 'warehousing' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓储费",suffix:"元/天/KG"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"搬运费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["truckage"],expression:"[ 'truckage' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入搬运费",suffix:"元"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"负责人"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["principal"],expression:"[ 'principal' ]"}],attrs:{placeholder:"选择负责人",dropdownMatchSelectWidth:!1}},e._l(e.userList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v("\n              "+e._s(a.userName)+"\n            ")])})),1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"[ 'remark' ]",modifiers:{trim:!0}}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],2)],1)},i=[],o=a("85ee"),l=a.n(o),n=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"DepotModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},maskStyle:"",userList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入仓库名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"},{validator:this.validateDepotName}]}}}},created:function(){this.initUser()},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"name","address","warehousing","truckage","principal","sort","remark")),Object(s["a"])("depotModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,o=Object.assign(e.model,r);i=e.model.id?Object(n["F"])(o):Object(n["b"])(o),i.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateDepotName:function(e,t,a){var r={name:t,id:this.model.id?this.model.id:0};Object(n["q"])(r).then((function(e){e&&200===e.code?e.data.status?a("名称已经存在"):a():a(e.data)}))},initUser:function(){var e=this;Object(n["qb"])({}).then((function(t){t&&(e.userList=t)}))}}},m=c,p=a("e607"),u=Object(p["a"])(m,r,i,!1,null,"07631d0c",null);t["default"]=u.exports}}]);