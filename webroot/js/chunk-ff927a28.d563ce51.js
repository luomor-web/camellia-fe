(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff927a28","chunk-65088f60","chunk-bacb0958","chunk-203995bb"],{"3d9e":function(e,t,a){"use strict";a("790b")},"58b1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"30%",height:"35%"},attrs:{title:e.title,width:500,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"batchSetDepot"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["depotId",e.validatorRules.depotId],expression:"[ 'depotId', validatorRules.depotId ]"}],attrs:{placeholder:"请选择仓库",showSearch:"",optionFilterProp:"children"}},e._l(e.depotList,(function(a,i){return t("a-select-option",{attrs:{value:a.id}},[e._v("\n              "+e._s(a.depotName)+"\n            ")])})),1)],1)],1)],1)],2)],1)},r=[],n=a("85ee"),o=a.n(n),l=a("0fea"),s=a("ac0d"),d={name:"BatchSetDepot",mixins:[s["b"]],data:function(){return{title:"操作",visible:!1,model:{},depotList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{depotId:{rules:[{required:!0,message:"请选择仓库!"}]}}}},created:function(){},methods:{getDepotData:function(){var e=this;Object(l["c"])("/depot/findDepotByCurrentUser").then((function(t){200===t.code?e.depotList=t.data:e.$message.info(t.data)}))},add:function(){this.edit({}),this.getDepotData()},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,"depotId"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r=Object.assign(e.model,i),n=r.depotId;t.$emit("ok",n),t.confirmLoading=!1,t.close()}}))},handleCancel:function(){this.close()}}},c=d,u=a("e607"),m=Object(u["a"])(c,i,r,!1,null,"54ab67bc",null);t["default"]=m.exports},"790b":function(e,t,a){},"85ee":function(e,t,a){(function(t){var a=1/0,i=9007199254740991,r="[object Arguments]",n="[object Function]",o="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,c=s||d||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,i=e?e.length:0,r=Array(i);while(++a<i)r[a]=t(e[a],a,e);return r}function p(e,t){var a=-1,i=t.length,r=e.length;while(++a<i)e[r+a]=t[a];return e}var f=Object.prototype,h=f.hasOwnProperty,v=f.toString,b=c.Symbol,g=f.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function C(e,t,a,i,r){var n=-1,o=e.length;a||(a=S),r||(r=[]);while(++n<o){var l=e[n];t>0&&a(l)?t>1?C(l,t-1,a,i,r):p(r,l):i||(r[r.length]=l)}return r}function k(e,t){return e=Object(e),x(e,t,(function(t,a){return a in e}))}function x(e,t,a){var i=-1,r=t.length,n={};while(++i<r){var o=t[i],l=e[o];a(l,o)&&(n[o]=l)}return n}function L(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,i=-1,r=w(a.length-t,0),n=Array(r);while(++i<r)n[i]=a[t+i];i=-1;var o=Array(t+1);while(++i<t)o[i]=a[i];return o[t]=n,u(e,this,o)}}function S(e){return j(e)||I(e)||!!(y&&e&&e[y])}function O(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function I(e){return T(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==r)}var j=Array.isArray;function N(e){return null!=e&&_(e.length)&&!D(e)}function T(e){return A(e)&&N(e)}function D(e){var t=F(e)?v.call(e):"";return t==n||t==o}function _(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}function $(e){return"symbol"==typeof e||A(e)&&v.call(e)==l}var M=L((function(e,t){return null==e?{}:k(e,m(C(t,1),O))}));e.exports=M}).call(this,a("2409"))},cf74:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+"\n      ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,width:1e3,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},r=[],n=a("1f37"),o=a("9fb0"),l=a("0fea"),s=a("4ec3"),d="all",c="image",u=function(){return"-"+parseInt(1e4*Math.random()+1,10)},m=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},p={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:"",sizeLimit:0}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:d},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===c},complistType:function(){return this.fileType===c?"picture-card":"text"}},created:function(){this.initFileSizeLimit();var e=n["a"].ls.get(o["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileSizeLimit:function(){var e=this;Object(s["T"])().then((function(t){200===t.code&&(e.sizeLimit=t.data)}))},initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++){var i=Object(l["d"])(e[a].filePath);t.push({uid:u(),name:e[a].fileName,status:"done",url:i,response:{code:"history",data:e[a].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),i=0;i<a.length;i++){var r=Object(l["d"])("systemConfig/static/"+a[i]);t.push({uid:u(),name:m(a[i]),status:"done",url:r,response:{code:"history",data:a[i]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],i=0;i<e.length;i++)a.push(e[i].response.data);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type,a=e.size;if(this.fileType===c&&t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(a>this.sizeLimit){var i=(this.sizeLimit/1024/1024).toFixed(2);return this.$message.warning("抱歉，文件大小不能超过"+i+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),200===e.file.response.code&&(t=t.map((function(e){if(e.response){var t=e.response.data;e.url=Object(l["d"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<t.length;a++){var i={fileName:t[a].name,filePath:t[a].response.data,fileSize:t[a].size};this.newFileList.push(i)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){var t=e.name.substring(e.name.indexOf("."));".gif"===t||".jpg"===t||".jpeg"===t||".png"===t||".GIF"===t||".JPG"===t||".JPEG"===t||".PNG"===t?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,a=this.fileList[e-1].url,i=[],r=0;r<this.fileList.length;r++)r==e-1?i.push(t):r==e?i.push(a):i.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",i.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,a=this.fileList[e+1].url,i=[],r=0;r<this.fileList.length;r++)r==e+1?i.push(t):r==e?i.push(a):i.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",i.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var a=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];a&&a.length>0&&(a[0].addEventListener("mouseover",(function(t){t=t||window.event;var a=t.target||t.srcElement;if("ant-upload-list-item-info"==a.className){e.showMoverTask=!1;var i=a.parentElement;e.left=i.offsetLeft,e.top=i.offsetTop+i.offsetHeight-50,e.moveDisplay="block",e.currentImg=a.getElementsByTagName("img")[0].src}})),a[0].addEventListener("mouseout",(function(t){t=t||window.event;var a=t.target||t.srcElement;"ant-upload-list-item-info"==a.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=a.className&&"ant-upload-list ant-upload-list-picture-card"!=a.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},f=p,h=(a("3d9e"),a("e607")),v=Object(h["a"])(f,i,r,!1,null,null,null);t["default"]=v.exports},d921:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("j-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,keyboard:!1,forceRender:!0,switchFullscreen:""},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v("取消")]),e.checkFlag&&e.isCanCheck?t("a-button",{attrs:{loading:e.confirmLoading},on:{click:e.handleOkAndCheck}},[e._v("保存并审核")]):e._e(),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleOk}},[e._v("保存")]),e.checkFlag?e._e():t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleWorkflow()}}},[e._v("提交流程")])],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[t("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["operTime",e.validatorRules.operTime],expression:"['operTime', validatorRules.operTime]"}],attrs:{"show-time":!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["number"],expression:"[ 'number' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入单据编号",readOnly:!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}}),t("a-col",{attrs:{lg:6,md:12,sm:24}})],1),t("j-editable-table",{ref:e.refKeys[0],attrs:{id:"billModal",loading:e.materialTable.loading,columns:e.materialTable.columns,dataSource:e.materialTable.dataSource,minWidth:e.minWidth,maxHeight:300,rowNumber:!1,rowSelection:!0,actionButton:!0},on:{valueChange:e.onValueChange,added:e.onAdded,deleted:e.onDeleted},scopedSlots:e._u([{key:"buttonAfter",fn:function(){return[t("a-row",{staticStyle:{float:"left"},attrs:{gutter:24,"data-step":"4","data-title":"扫码录入","data-intro":"此功能支持扫码枪扫描商品条码进行录入"}},[e.scanStatus?t("a-col",{attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.scanEnter}},[e._v("扫码录入")])],1):e._e(),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0 6px 0 12px"},attrs:{md:16,sm:24}},[t("a-input",{ref:"scanBarCode",attrs:{placeholder:"请扫描商品条码并回车"},on:{pressEnter:e.scanPressEnter},model:{value:e.scanBarCode,callback:function(t){e.scanBarCode=t},expression:"scanBarCode"}})],1),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0px"},attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.stopScan}},[e._v("收起扫码")])],1)],1)]},proxy:!0},{key:"depotBatchSet",fn:function(){return[t("a-icon",{attrs:{type:"down"},on:{click:e.handleBatchSetDepot}})]},proxy:!0},{key:"depotAdd",fn:function(){return[e.isTenant?t("a-divider",{staticStyle:{margin:"4px 0"}}):e._e(),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{click:e.addDepot}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增仓库")],1):e._e()]},proxy:!0}])}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],staticStyle:{"margin-top":"8px"},attrs:{rows:1,placeholder:"请输入备注"}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"附件"}},[t("j-upload",{attrs:{bizPath:"bill"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)],1)],1)],1),t("depot-modal",{ref:"depotModalForm",on:{ok:e.depotModalFormOk}}),t("batch-set-depot",{ref:"batchSetDepotModalForm",on:{ok:e.batchSetDepotModalFormOk}}),t("workflow-iframe",{ref:"modalWorkflow"})],2)},r=[],n=a("85ee"),o=a.n(n),l=a("e561"),s=a("58b1"),d=a("9cf1"),c=a("e2e0"),u=a("d0ed"),m=a("80fd"),p=a("0fea"),f=a("ca00"),h=a("cf74"),v=a("2dab"),b=a("1f37");function g(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=y(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw n}}}}function y(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var C={name:"AssembleModal",mixins:[u["a"],m["BillModalMixin"]],components:{DepotModal:l["default"],BatchSetDepot:s["default"],WorkflowIframe:d["default"],JUpload:h["default"],JDate:v["default"]},data:function(){return{title:"操作",width:"1600px",moreStatus:!1,addDefaultRowNum:1,visible:!1,operTimeStr:"",prefixNo:"ZZD",fileList:[],model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},refKeys:["materialDataTable"],activeKey:"materialDataTable",materialTable:{loading:!1,dataSource:[],columns:[{title:"商品类型",key:"mType",width:"7%",type:c["a"].normal},{title:"仓库名称",key:"depotId",width:"8%",type:c["a"].select,placeholder:"请选择${title}",options:[],allowSearch:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"条码",key:"barCode",width:"12%",type:c["a"].popupJsh,kind:"material",multi:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"名称",key:"name",width:"10%",type:c["a"].normal},{title:"规格",key:"standard",width:"9%",type:c["a"].normal},{title:"型号",key:"model",width:"9%",type:c["a"].normal},{title:"颜色",key:"color",width:"5%",type:c["a"].normal},{title:"扩展信息",key:"materialOther",width:"5%",type:c["a"].normal},{title:"库存",key:"stock",width:"5%",type:c["a"].normal},{title:"单位",key:"unit",width:"4%",type:c["a"].normal},{title:"多属性",key:"sku",width:"4%",type:c["a"].normal},{title:"数量",key:"operNumber",width:"5%",type:c["a"].inputNumber,statistics:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"单价",key:"unitPrice",width:"5%",type:c["a"].inputNumber},{title:"金额",key:"allPrice",width:"5%",type:c["a"].inputNumber,statistics:!0},{title:"备注",key:"remark",width:"5%",type:c["a"].input}]},confirmLoading:!1,validatorRules:{operTime:{rules:[{required:!0,message:"请输入单据日期!"}]},type:{rules:[{required:!0,message:"请选择类型!"}]}},url:{add:"/depotHead/addDepotHeadAndDetail",edit:"/depotHead/updateDepotHeadAndDetail",detailList:"/depotItem/getDetailList"}}},created:function(){},methods:{editAfter:function(){var e=this;if(this.billStatus="0",this.currentSelectDepotId="",this.changeColumnHide(),"add"===this.action)this.addInit(this.prefixNo),this.fileList=[];else{this.model.operTime=this.model.operTimeStr,this.model.debt=(this.model.discountLastMoney-this.model.changeAmount).toFixed(2),this.fileList=this.model.fileName,this.$nextTick((function(){e.form.setFieldsValue(o()(e.model,"organId","operTime","number","remark","discount","discountMoney","discountLastMoney","otherMoney","accountId","changeAmount","debt"))}));var t={headerId:this.model.id,mpList:Object(f["g"])(b["a"].ls.get("materialPropertyList")),linkType:"basic"},a=(this.readOnly,this.url.detailList);this.requestSubTableData(a,t,this.materialTable)}"copyAdd"===this.action&&(this.model.id="",this.model.tenantId="",this.copyAddInit(this.prefixNo)),this.initSystemConfig(),this.initDepot()},classifyIntoFormData:function(e){var t=0,a=Object.assign(this.model,e.formValue),i=e.tablesValue[0].values;a.type="其它",a.subType="组装单",a.defaultNumber=a.number;var r,n=g(i);try{for(n.s();!(r=n.n()).done;){var o=r.value;t+=o.allPrice-0}}catch(l){n.e(l)}finally{n.f()}return a.totalPrice=t,this.fileList&&this.fileList.length>0?a.fileName=this.fileList:a.fileName="",this.model.id&&(a.id=this.model.id),a.status=this.billStatus,{info:JSON.stringify(a),rows:JSON.stringify(i)}},onAdded:function(e){var t=e.row,a=e.target;Object(p["c"])("/depot/findDepotByCurrentUser").then((function(e){if(200===e.code)for(var i=e.data,r=0;r<i.length;r++)i[r].isDefault&&a.setValues([{rowKey:t.id,values:{depotId:i[r].id+""}}])})),a.rows.length>=2?a.setValues([{rowKey:t.id,values:{mType:"普通子件"}}]):a.setValues([{rowKey:t.id,values:{mType:"组合件"}}])}}},k=C,x=a("e607"),L=Object(x["a"])(k,i,r,!1,null,"aa1b13ec",null);t["default"]=L.exports},e561:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"10%",height:"70%"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"depotModal"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库名称"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库地址"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["address"],expression:"[ 'address' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库地址"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓储费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["warehousing"],expression:"[ 'warehousing' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓储费",suffix:"元/天/KG"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"搬运费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["truckage"],expression:"[ 'truckage' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入搬运费",suffix:"元"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"负责人"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["principal"],expression:"[ 'principal' ]"}],attrs:{placeholder:"选择负责人",dropdownMatchSelectWidth:!1}},e._l(e.userList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v("\n              "+e._s(a.userName)+"\n            ")])})),1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"[ 'remark' ]",modifiers:{trim:!0}}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],2)],1)},r=[],n=a("85ee"),o=a.n(n),l=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"DepotModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},maskStyle:"",userList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入仓库名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"},{validator:this.validateDepotName}]}}}},created:function(){this.initUser()},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,"name","address","warehousing","truckage","principal","sort","remark")),Object(s["a"])("depotModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r,n=Object.assign(e.model,i);r=e.model.id?Object(l["F"])(n):Object(l["b"])(n),r.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateDepotName:function(e,t,a){var i={name:t,id:this.model.id?this.model.id:0};Object(l["q"])(i).then((function(e){e&&200===e.code?e.data.status?a("名称已经存在"):a():a(e.data)}))},initUser:function(){var e=this;Object(l["qb"])({}).then((function(t){t&&(e.userList=t)}))}}},u=c,m=a("e607"),p=Object(m["a"])(u,i,r,!1,null,"07631d0c",null);t["default"]=p.exports}}]);