(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fd6c22e","chunk-1700da54","chunk-2d0bdf09","chunk-2d0e9773"],{"2dab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],r=a("2f42"),l=a.n(r),s={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD HH:mm:ss",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?l()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?l()(e,this.dateFormat):null}},methods:{moment:l.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},o=s,c=a("e607"),u=Object(c["a"])(o,n,i,!1,null,null,null);t["default"]=u.exports},"3b78":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:1600,visible:e.visible,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("取消")])],1),t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据编号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:"请输入单据编号"},model:{value:e.queryParam.billNo,callback:function(t){e.$set(e.queryParam,"billNo",t)},expression:"queryParam.billNo"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"操作员",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{attrs:{placeholder:"选择操作员",showSearch:"",optionFilterProp:"children"},model:{value:e.queryParam.creator,callback:function(t){e.$set(e.queryParam,"creator",t)},expression:"queryParam.creator"}},e._l(e.userList,(function(a,n){return t("a-select-option",{key:n,attrs:{value:a.id}},[e._v("\n                  "+e._s(a.userName)+"\n                ")])})),1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{attrs:{placeholder:"选择单据状态"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[t("a-select-option",{attrs:{value:"0"}},[e._v("未审核")]),t("a-select-option",{attrs:{value:"1"}},[e._v("已审核")])],1)],1)],1),t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.searchReset}},[e._v("重置")]),t("a",{staticStyle:{"margin-left":"8px"},on:{click:e.handleToggleSearch}},[e._v("\n                "+e._s(e.toggleSearchStatus?"收起":"展开")+"\n                "),t("a-icon",{attrs:{type:e.toggleSearchStatus?"up":"down"}})],1)],1)],1),e.toggleSearchStatus?[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"财务人员",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{attrs:{placeholder:"选择财务人员",showSearch:"",optionFilterProp:"children"},model:{value:e.queryParam.handsPersonId,callback:function(t){e.$set(e.queryParam,"handsPersonId",t)},expression:"queryParam.handsPersonId"}},e._l(e.personList,(function(a,n){return t("a-select-option",{key:n,attrs:{value:a.id}},[e._v("\n                    "+e._s(a.name)+"\n                  ")])})),1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"账户信息",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{attrs:{placeholder:"选择账户信息",showSearch:"",optionFilterProp:"children"},model:{value:e.queryParam.accountId,callback:function(t){e.$set(e.queryParam,"accountId",t)},expression:"queryParam.accountId"}},e._l(e.accountList,(function(a,n){return t("a-select-option",{key:n,attrs:{value:a.id}},[e._v("\n                    "+e._s(a.name)+"\n                  ")])})),1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:"请输入单据备注"},model:{value:e.queryParam.remark,callback:function(t){e.$set(e.queryParam,"remark",t)},expression:"queryParam.remark"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"销售单号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{attrs:{placeholder:"请输入销售单号"},model:{value:e.queryParam.number,callback:function(t){e.$set(e.queryParam,"number",t)},expression:"queryParam.number"}})],1)],1)]:e._e()],2)],1)],1),t("a-table",{ref:"table",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.columns,dataSource:e.dataSource,components:e.handleDrag(e.columns),pagination:e.ipagination,scroll:e.scroll,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"billNoCustomRender",fn:function(a,n){return t("span",{},[t("a",{on:{click:function(t){return e.myHandleDetail(n,e.queryParam.type,e.prefixNo)}}},[e._v(e._s(a))])])}},{key:"customRenderStatus",fn:function(a){return["0"==a?t("a-tag",{attrs:{color:"red"}},[e._v("未审核")]):e._e(),"1"==a?t("a-tag",{attrs:{color:"green"}},[e._v("已审核")]):e._e(),"9"==a?t("a-tag",{attrs:{color:"orange"}},[e._v("审核中")]):e._e()]}}])}),t("financial-detail",{ref:"modalDetail",on:{ok:e.modalFormOk,close:e.modalFormClose}})],2)],1)},i=[],r=a("0b17"),l=a("b65a"),s=a("8e3c"),o=a("2dab"),c=a("1f37"),u={name:"HistoryFinancialList",mixins:[l["a"],s["FinancialListMixin"]],components:{FinancialDetail:r["default"],JDate:o["default"]},data:function(){return{title:"",visible:!1,labelCol:{span:5},wrapperCol:{span:18,offset:1},queryParam:{billNo:"",beginTime:"",endTime:"",searchMaterial:"",type:"",organId:"",creator:"",handsPersonId:"",accountId:"",status:"",remark:"",number:"",roleType:c["a"].ls.get("roleType")},prefixNo:"",disableMixinCreated:!0,columns:[{title:"#",dataIndex:"",key:"rowIndex",width:40,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"单据编号",dataIndex:"billNo",width:120,scopedSlots:{customRender:"billNoCustomRender"}},{title:"客户",dataIndex:"organName",width:140,ellipsis:!0},{title:"单据日期 ",dataIndex:"billTimeStr",width:140},{title:"操作员",dataIndex:"userName",width:100,ellipsis:!0},{title:"财务人员",dataIndex:"handsPersonName",width:100},{title:"合计收款",dataIndex:"totalPrice",width:80},{title:"优惠金额",dataIndex:"discountMoney",width:80},{title:"实际收款",dataIndex:"changeAmount",width:80},{title:"备注",dataIndex:"remark",width:160},{title:"状态",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"customRenderStatus"}}],url:{list:"/accountHead/list"}}},computed:{},created:function(){this.initSystemConfig(),this.initUser(),this.initPerson(),this.initAccount()},mounted:function(){this.scroll.x=1520},methods:{show:function(){"付款"===this.queryParam.type?(this.columns[2].title="供应商",this.columns[6].title="合计付款",this.columns[8].title="实际付款",this.prefixNo="FK"):"收款"===this.queryParam.type&&(this.columns[2].title="客户",this.columns[6].title="合计收款",this.columns[8].title="实际收款",this.prefixNo="SK"),this.loadData(1)},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},searchReset:function(){this.queryParam={organId:this.queryParam.organId,beginTime:this.queryParam.beginTime,endTime:this.queryParam.endTime,type:this.queryParam.type,roleType:c["a"].ls.get("roleType")},this.loadData(1)}}},d=u,m=(a("8a42"),a("e607")),h=Object(m["a"])(d,n,i,!1,null,"f75897e6",null);t["default"]=h.exports},"8a42":function(e,t,a){"use strict";a("a74e")},"8e3c":function(e,t,a){"use strict";a.r(t),a.d(t,"FinancialListMixin",(function(){return l}));var n=a("4ec3"),i=a("ca00"),r=a("1f37"),l={data:function(){return{checkFlag:!0,prefixNo:"",supList:[],cusList:[],organList:[],retailList:[],userList:[],personList:[],accountList:[]}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)},isBatchDelEnabled:function(){for(var e=0;e<this.selectedRowKeys.length;e++)if(!this.selectionRows[e].actionsEnabled.delete)return!1;return!0}},created:function(){},methods:{myHandleAdd:function(){this.$refs.modalForm.action="add",-1===this.btnEnableList.indexOf(2)&&(this.$refs.modalForm.isCanCheck=!1),this.handleAdd()},myHandleEdit:function(e){var t=this;"0"===e.status?(this.$refs.modalForm.action="edit",-1===this.btnEnableList.indexOf(2)&&(this.$refs.modalForm.isCanCheck=!1),Object(n["Z"])({billNo:e.billNo}).then((function(e){if(e&&200===e.code){var a=e.data;t.handleEdit(a)}}))):this.$message.warning("抱歉，只有未审核的单据才能编辑！")},myHandleDelete:function(e){"0"===e.status?this.handleDelete(e.id):this.$message.warning("抱歉，只有未审核的单据才能删除！")},myHandleDetail:function(e,t,a){-1===this.btnEnableList.indexOf(7)&&(this.$refs.modalDetail.isCanBackCheck=!1),this.handleDetail(e,t,a)},handleApprove:function(e){this.$refs.modalForm.action="approve",this.$refs.modalForm.edit(e),this.$refs.modalForm.title="审核"},searchReset:function(){this.queryParam={type:this.queryParam.type,roleType:r["a"].ls.get("roleType")},this.loadData(1)},initSystemConfig:function(){var e=this;Object(n["fb"])().then((function(t){if(200===t.code&&t.data){var a=t.data.multiBillType,n=t.data.multiLevelApprovalFlag;e.checkFlag=Object(i["f"])(a,n,e.prefixNo)}}))},initSupplier:function(){var e=this;Object(n["Y"])({}).then((function(t){t&&(e.supList=t)}))},initCustomer:function(){var e=this;Object(n["V"])({}).then((function(t){t&&(e.cusList=t)}))},initOrgan:function(){var e=this;Object(n["W"])({}).then((function(t){t&&(e.organList=t)}))},initRetail:function(){var e=this;Object(n["X"])({}).then((function(t){t&&(e.retailList=t)}))},initUser:function(){var e=this;Object(n["qb"])({}).then((function(t){t&&(e.userList=t)}))},initPerson:function(){var e=this;Object(n["ob"])({type:"财务员"}).then((function(t){t&&200===t.code&&(e.personList=t.data.personList)}))},initAccount:function(){var e=this;Object(n["cb"])({}).then((function(t){if(t&&200===t.code){var a=t.data.accountList;e.accountList=a}}))},onDateChange:function(e,t){this.queryParam.beginTime=t[0],this.queryParam.endTime=t[1]},onDateOk:function(e){}}}},"9c95":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:1200,visible:e.visible,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("取消")])],1),t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchQuery.apply(null,arguments)}}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"单据编号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"请输入单据编号查询"},model:{value:e.queryParam.number,callback:function(t){e.$set(e.queryParam,"number",t)},expression:"queryParam.number"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"商品信息",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{attrs:{placeholder:"请输入名称、规格、型号"},model:{value:e.queryParam.materialParam,callback:function(t){e.$set(e.queryParam,"materialParam",t)},expression:"queryParam.materialParam"}})],1)],1),t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-col",{attrs:{md:12,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{directives:[{name:"print",rawName:"v-print",value:"#debtAccountPrint",expression:"'#debtAccountPrint'"}],staticStyle:{"margin-left":"8px"},attrs:{icon:"printer"}},[e._v("打印")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"download"},on:{click:e.exportExcel}},[e._v("导出")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"history"},on:{click:e.handleHistoryFinancial}},[e._v(e._s(e.historyText))])],1)],1)],1)],1)],1),t("section",{ref:"debtPrint",attrs:{id:"debtAccountPrint"}},[t("a-table",{ref:"table",attrs:{bordered:"",size:"middle",rowKey:"id",columns:e.columns,dataSource:e.dataSource,pagination:!1,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"numberCustomRender",fn:function(a,n){return t("span",{},[t("a",{on:{click:function(t){return e.myHandleDetail(n)}}},[e._v(e._s(n.number))])])}}])})],1),t("bill-detail",{ref:"modalDetail"}),t("history-financial-list",{ref:"historyFinancial"})],2)],1)},i=[],r=a("9be9"),l=a("3b78"),s=a("b65a"),o=a("ca00"),c=a("ac0d"),u=a("4ec3"),d=a("1f37"),m={name:"DebtAccountList",mixins:[s["a"],c["b"]],components:{BillDetail:r["default"],HistoryFinancialList:l["default"]},data:function(){return{title:"操作",visible:!1,disableMixinCreated:!0,queryParam:{organId:"",materialParam:"",number:"",type:"",subType:"",roleType:d["a"].ls.get("roleType"),status:""},historyText:"",financialType:"",ipagination:{pageSize:10001},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},columns:[{title:"#",dataIndex:"rowIndex",width:40,align:"center",customRender:function(e,t,a){return"合计"!==e?parseInt(a)+1:e}},{title:"单据编号",dataIndex:"number",width:120,scopedSlots:{customRender:"numberCustomRender"}},{title:"",dataIndex:"organName",width:120},{title:"商品信息",dataIndex:"materialsList",width:200,ellipsis:!0,customRender:function(e,t,a){if(e)return e.replace(",","，")}},{title:"单据日期",dataIndex:"operTimeStr",width:130},{title:"操作员",dataIndex:"userName",width:60,ellipsis:!0},{title:"本单欠款",dataIndex:"needDebt",width:70},{title:"已收欠款",dataIndex:"finishDebt",width:70},{title:"待收欠款",dataIndex:"debt",width:70}],url:{list:"/depotHead/debtList"}}},computed:{getType:function(){return"checkbox"}},created:function(){},methods:{show:function(e,t,a,n,i,r,l){this.queryParam.organId=e,this.queryParam.type=t,this.queryParam.subType=a,this.queryParam.status=i,this.queryParam.beginTime=r,this.queryParam.endTime=l,this.columns[2].title=n,"入库"===t?(this.columns[7].title="已付欠款",this.columns[8].title="待付欠款",this.historyText="历史付款",this.financialType="付款"):"出库"===t&&(this.columns[7].title="已收欠款",this.columns[8].title="待收欠款",this.historyText="历史收款",this.financialType="收款"),this.model=Object.assign({},{}),this.visible=!0,this.loadData(1)},myHandleDetail:function(e){var t=this;Object(u["U"])({number:e.number}).then((function(e){if(e&&200===e.code){var a=e.data.depotHeadType;a=a.replace("其它",""),t.$refs.modalDetail.isCanBackCheck=!1,t.handleDetail(e.data,a)}}))},close:function(){this.$emit("close"),this.visible=!1},handleCancel:function(){this.close()},onDateOk:function(e){},exportExcel:function(){for(var e=[["单据编号",this.columns[2].title,"商品信息","单据日期","操作员","本单欠款","已收欠款","待收欠款"]],t=0;t<this.dataSource.length;t++){var a=this.dataSource[t],n=[a.number,a.organName,a.materialsList,a.operTimeStr,a.userName,a.needDebt,a.finishDebt,a.debt];e.push(n)}Object(o["l"])(Object(o["q"])(e),"欠款详情")},handleHistoryFinancial:function(){this.$refs.historyFinancial.visible=!0,this.$refs.historyFinancial.title=this.historyText,this.$refs.historyFinancial.queryParam.organId=this.queryParam.organId,this.$refs.historyFinancial.queryParam.beginTime=this.queryParam.beginTime,this.$refs.historyFinancial.queryParam.endTime=this.queryParam.endTime,this.$refs.historyFinancial.queryParam.type=this.financialType,this.$refs.historyFinancial.show()}}},h=m,p=a("e607"),f=Object(p["a"])(h,n,i,!1,null,"2461b040",null);t["default"]=f.exports},a74e:function(e,t,a){}}]);