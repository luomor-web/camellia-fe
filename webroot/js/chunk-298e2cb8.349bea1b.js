(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-298e2cb8","chunk-65088f60","chunk-bacb0958","chunk-407efc38","chunk-203995bb","chunk-78bc7fa6"],{3371:function(e,t,a){"use strict";a("4835")},"3d9e":function(e,t,a){"use strict";a("790b")},"45d1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"15%",height:"65%"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"accountModal"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入名称"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["serialNo"],expression:"[ 'serialNo' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入编号"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"期初金额"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["initialAmount"],expression:"[ 'initialAmount' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入期初金额"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"当前余额"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["currentAmount"],expression:"[ 'currentAmount' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入当前余额","read-only":!0}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],2)],1)},r=[],o=a("85ee"),l=a.n(o),n=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"AccountModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"},{validator:this.validateAccountName}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"name","serialNo","initialAmount","currentAmount","sort","remark")),Object(s["a"])("accountModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r,o=Object.assign(e.model,i);r=e.model.id?Object(n["E"])(o):Object(n["a"])(o),r.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateAccountName:function(e,t,a){var i={name:t,id:this.model.id?this.model.id:0};Object(n["p"])(i).then((function(e){e&&200===e.code?e.data.status?a("名称已经存在"):a():a(e.data)}))}}},m=c,u=a("e607"),p=Object(u["a"])(m,i,r,!1,null,"2c36c6f2",null);t["default"]=p.exports},"474a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("j-modal",{staticStyle:{top:"20px",height:"95%"},attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,keyboard:!1,forceRender:!0,prefixNo:e.prefixNo,switchHelp:"",switchFullscreen:"",id:e.prefixNo},on:{cancel:e.handleCancel}},[t("template",{slot:"footer"},[t("a-button",{on:{click:e.handleCancel}},[e._v("取消")]),e.checkFlag&&e.isCanCheck?t("a-button",{attrs:{loading:e.confirmLoading},on:{click:e.handleOkAndCheck}},[e._v("保存并审核")]):e._e(),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleOk}},[e._v("保存")]),e.checkFlag?e._e():t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleWorkflow()}}},[e._v("提交流程")])],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"会员卡号","data-step":"1","data-title":"会员卡号","data-intro":"如果发现需要选择的会员卡号尚未录入，可以在下拉框中点击新增会员信息进行录入"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["organId"],expression:"[ 'organId' ]"}],attrs:{placeholder:"选择会员卡号",dropdownMatchSelectWidth:!1,showSearch:"",optionFilterProp:"children"},on:{change:e.onChangeOrgan},scopedSlots:e._u([{key:"dropdownRender",fn:function(a){return t("div",{},[t("v-nodes",{attrs:{vnodes:a}}),t("a-divider",{staticStyle:{margin:"4px 0"}}),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:e.addMember}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增会员")],1):e._e()],1)}}])},e._l(e.retailList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v("\n                "+e._s(a.supplier)+"\n              ")])})),1)],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据日期"}},[t("j-date",{directives:[{name:"decorator",rawName:"v-decorator",value:["operTime",e.validatorRules.operTime],expression:"['operTime', validatorRules.operTime]"}],attrs:{"show-time":!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"单据编号","data-step":"2","data-title":"单据编号","data-intro":"单据编号自动生成、自动累加、开头是单据类型的首字母缩写，累加的规则是每次打开页面会自动占用一个新的编号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["number"],expression:"[ 'number' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入单据编号",readOnly:!0}})],1)],1),t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"收款类型","data-step":"3","data-title":"收款类型","data-intro":"收款类型可以有现付和预付款两种类型，当选择了会员之后，如果该会员有预付款，在此处会显示具体预付款的金额，而且系统会优先默认选中预付款"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["payType"],expression:"[ 'payType' ]"}],attrs:{placeholder:"请选择付款类型",dropdownMatchSelectWidth:!1}},e._l(e.payTypeList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.value}},[e._v("\n                "+e._s(a.text)+"\n              ")])})),1)],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:18,md:12,sm:24}},[t("j-editable-table",{ref:e.refKeys[0],attrs:{id:"billModal",loading:e.materialTable.loading,columns:e.materialTable.columns,dataSource:e.materialTable.dataSource,minWidth:e.minWidth,maxHeight:300,rowNumber:!1,rowSelection:!0,actionButton:!0,dragSort:!0},on:{valueChange:e.onValueChange,added:e.onAdded,deleted:e.onDeleted},scopedSlots:e._u([{key:"buttonAfter",fn:function(){return[t("a-row",{staticStyle:{float:"left"},attrs:{gutter:24,"data-step":"4","data-title":"扫码录入","data-intro":"此功能支持扫码枪扫描商品条码进行录入"}},[e.scanStatus?t("a-col",{attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.scanEnter}},[e._v("扫码录入")])],1):e._e(),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0 6px 0 12px"},attrs:{md:16,sm:24}},[t("a-input",{ref:"scanBarCode",attrs:{placeholder:"请扫条码或序列号并回车"},on:{pressEnter:e.scanPressEnter},model:{value:e.scanBarCode,callback:function(t){e.scanBarCode=t},expression:"scanBarCode"}})],1),e.scanStatus?e._e():t("a-col",{staticStyle:{padding:"0px 18px 0 0"},attrs:{md:6,sm:24}},[t("a-button",{on:{click:e.stopScan}},[e._v("收起扫码")])],1)],1)]},proxy:!0},{key:"depotBatchSet",fn:function(){return[t("a-icon",{attrs:{type:"down"},on:{click:e.handleBatchSetDepot}})]},proxy:!0},{key:"depotAdd",fn:function(){return[e.isTenant?t("a-divider",{staticStyle:{margin:"4px 0"}}):e._e(),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{click:e.addDepot}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增仓库")],1):e._e()]},proxy:!0}])}),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:24,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:{xs:{span:24},sm:{span:24}},label:""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[ 'remark' ]"}],staticStyle:{"margin-top":"8px"},attrs:{rows:1,placeholder:"请输入备注"}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"附件","data-step":"9","data-title":"附件","data-intro":"可以上传与单据相关的图片、文档，支持多个文件"}},[t("j-upload",{attrs:{bizPath:"bill"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)],1)],1),t("div",{staticClass:"sign"},[t("a-col",{attrs:{lg:6,md:12,sm:24}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{lg:24,md:6,sm:6}},[t("br"),t("br")]),t("a-col",{attrs:{lg:24,md:6,sm:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"data-step":"5","data-title":"单据金额","data-intro":"单据金额等于左侧商品的总金额"}},[t("span",{staticStyle:{"font-size":"20px","line-height":"20px"},attrs:{slot:"label"},slot:"label"},[e._v("单据金额")]),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["changeAmount"],expression:"[ 'changeAmount' ]",modifiers:{trim:!0}}],style:{color:"purple"},attrs:{readOnly:!0}})],1)],1),t("a-col",{attrs:{lg:24,md:6,sm:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"data-step":"6","data-title":"收款金额","data-intro":"收款金额为收银员收取用户的实际金额"}},[t("span",{staticStyle:{"font-size":"20px","line-height":"20px"},attrs:{slot:"label"},slot:"label"},[e._v("收款金额")]),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["getAmount"],expression:"[ 'getAmount' ]",modifiers:{trim:!0}}],style:{color:"red"},attrs:{defaultValue:"0"},on:{change:e.onChangeGetAmount}})],1)],1),t("a-col",{attrs:{lg:24,md:6,sm:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"data-step":"7","data-title":"找零","data-intro":"找零等于收款金额减去实收金额"}},[t("span",{staticStyle:{"font-size":"20px","line-height":"20px"},attrs:{slot:"label"},slot:"label"},[e._v("找零")]),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["backAmount"],expression:"[ 'backAmount' ]",modifiers:{trim:!0}}],style:{color:"green"},attrs:{readOnly:!0,defaultValue:"0"}})],1)],1),t("a-col",{attrs:{lg:24,md:6,sm:6}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"data-step":"8","data-title":"收款账户","data-intro":"收款账户的信息来自基本资料菜单下的【结算账户】"}},[t("span",{staticStyle:{"font-size":"20px","line-height":"20px"},attrs:{slot:"label"},slot:"label"},[e._v("收款账户")]),t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["accountId",e.validatorRules.accountId],expression:"[ 'accountId', validatorRules.accountId ]"}],staticStyle:{"font-size":"20px"},attrs:{placeholder:"选择收款账户",dropdownMatchSelectWidth:!1},scopedSlots:e._u([{key:"dropdownRender",fn:function(a){return t("div",{},[t("v-nodes",{attrs:{vnodes:a}}),t("a-divider",{staticStyle:{margin:"4px 0"}}),e.isTenant?t("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:e.addAccount}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 新增结算账户")],1):e._e()],1)}}])},e._l(e.accountList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v("\n                      "+e._s(a.name)+"\n                    ")])})),1)],1)],1)],1)],1)],1)],1)],1)],1),t("member-modal",{ref:"memberModalForm",on:{ok:e.memberModalFormOk}}),t("depot-modal",{ref:"depotModalForm",on:{ok:e.depotModalFormOk}}),t("account-modal",{ref:"accountModalForm",on:{ok:e.accountModalFormOk}}),t("batch-set-depot",{ref:"batchSetDepotModalForm",on:{ok:e.batchSetDepotModalFormOk}}),t("workflow-iframe",{ref:"modalWorkflow"})],2)},r=[],o=a("85ee"),l=a.n(o),n=a("d816"),s=a("e561"),d=a("45d1"),c=a("58b1"),m=a("9cf1"),u=a("e2e0"),p=a("d0ed"),f=a("80fd"),h=a("ca00"),v=a("4ec3"),b=a("0fea"),g=a("cf74"),y=a("2dab"),w=a("1f37");function C(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=x(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){n=!0,o=e},f:function(){try{l||null==a.return||a.return()}finally{if(n)throw o}}}}function x(e,t){if(e){if("string"===typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var L={name:"RetailOutModal",mixins:[p["a"],f["BillModalMixin"]],components:{MemberModal:n["default"],DepotModal:s["default"],AccountModal:d["default"],BatchSetDepot:c["default"],WorkflowIframe:m["default"],JUpload:g["default"],JDate:y["default"],VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{title:"操作",width:"1600px",moreStatus:!1,addDefaultRowNum:1,visible:!1,operTimeStr:"",prefixNo:"LSCK",fileList:[],payTypeList:[],minWidth:1100,model:{},labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}},refKeys:["materialDataTable"],activeKey:"materialDataTable",materialTable:{loading:!1,dataSource:[],columns:[{title:"仓库名称",key:"depotId",width:"10%",type:u["a"].select,placeholder:"请选择${title}",options:[],allowSearch:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"条码",key:"barCode",width:"16%",type:u["a"].popupJsh,kind:"material",multi:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"名称",key:"name",width:"12%",type:u["a"].normal},{title:"规格",key:"standard",width:"10%",type:u["a"].normal},{title:"型号",key:"model",width:"10%",type:u["a"].normal},{title:"颜色",key:"color",width:"5%",type:u["a"].normal},{title:"扩展信息",key:"materialOther",width:"7%",type:u["a"].normal},{title:"库存",key:"stock",width:"5%",type:u["a"].normal},{title:"单位",key:"unit",width:"5%",type:u["a"].normal},{title:"序列号",key:"snList",width:"12%",type:u["a"].popupJsh,kind:"sn",multi:!0},{title:"批号",key:"batchNumber",width:"8%",type:u["a"].popupJsh,kind:"batch",multi:!1},{title:"有效期",key:"expirationDate",width:"9%",type:u["a"].input,readonly:!0},{title:"多属性",key:"sku",width:"9%",type:u["a"].normal},{title:"数量",key:"operNumber",width:"6%",type:u["a"].inputNumber,statistics:!0,validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"单价",key:"unitPrice",width:"6%",type:u["a"].inputNumber},{title:"金额",key:"allPrice",width:"6%",type:u["a"].inputNumber,statistics:!0},{title:"备注",key:"remark",width:"7%",type:u["a"].input}]},confirmLoading:!1,validatorRules:{operTime:{rules:[{required:!0,message:"请输入单据日期!"}]},accountId:{rules:[{required:!0,message:"请选择结算账户!"}]}},url:{add:"/depotHead/addDepotHeadAndDetail",edit:"/depotHead/updateDepotHeadAndDetail",detailList:"/depotItem/getDetailList"}}},created:function(){this.initPayTypeList();var e=window.screen.width;this.minWidth=e<1500?800:1100},methods:{editAfter:function(){var e=this;if(this.billStatus="0",this.currentSelectDepotId="",this.changeColumnHide(),this.changeFormTypes(this.materialTable.columns,"snList",0),this.changeFormTypes(this.materialTable.columns,"batchNumber",0),this.changeFormTypes(this.materialTable.columns,"expirationDate",0),"add"===this.action)this.addInit(this.prefixNo),this.fileList=[],this.$nextTick((function(){Object(h["k"])(e.prefixNo,1)})),this.$nextTick((function(){e.form.setFieldsValue({payType:"现付",getAmount:0,backAmount:0})}));else{this.model.operTime=this.model.operTimeStr,this.model.backAmount?this.model.getAmount=(this.model.changeAmount+this.model.backAmount).toFixed(2):this.model.getAmount=this.model.changeAmount,this.fileList=this.model.fileName,"预付款"===this.model.payType&&(this.payTypeList=[],this.payTypeList.push({value:"预付款",text:"预付款"}),this.payTypeList.push({value:"现付",text:"现付"})),this.$nextTick((function(){e.form.setFieldsValue(l()(e.model,"organId","operTime","number","payType","remark","discount","discountMoney","discountLastMoney","otherMoney","accountId","changeAmount","getAmount","backAmount"))}));var t={headerId:this.model.id,mpList:Object(h["g"])(w["a"].ls.get("materialPropertyList")),linkType:"basic"},a=(this.readOnly,this.url.detailList);this.requestSubTableData(a,t,this.materialTable)}"copyAdd"===this.action&&(this.model.id="",this.model.tenantId="",this.copyAddInit(this.prefixNo)),this.initSystemConfig(),this.initRetail(),this.initDepot(),this.initAccount()},classifyIntoFormData:function(e){var t=0,a=Object.assign(this.model,e.formValue),i=e.tablesValue[0].values;a.type="出库",a.subType="零售",a.defaultNumber=a.number;var r,o=C(i);try{for(o.s();!(r=o.n()).done;){var l=r.value;t+=l.allPrice-0}}catch(n){o.e(n)}finally{o.f()}return a.totalPrice=t,this.fileList&&this.fileList.length>0?a.fileName=this.fileList:a.fileName="",this.model.id&&(a.id=this.model.id),a.status=this.billStatus,{info:JSON.stringify(a),rows:JSON.stringify(i)}},initPayTypeList:function(){this.payTypeList.push({value:"现付",text:"现付"})},initAccount:function(){var e=this;Object(v["cb"])({}).then((function(t){t&&200===t.code&&(e.accountList=t.data.accountList)}))},onChangeOrgan:function(e){var t=this;Object(b["c"])("/supplier/info",{id:e}).then((function(e){if(e&&200===e.code){t.payTypeList=[];var a=e.data.info;a.advanceIn?(t.payTypeList.push({value:"预付款",text:"预付款（"+a.advanceIn+"）"}),t.payTypeList.push({value:"现付",text:"现付"}),t.$nextTick((function(){t.form.setFieldsValue({payType:"预付款"})}))):t.payTypeList.push({value:"现付",text:"现付"})}}))},autoChangePrice:function(e){var t=this,a=e.statisticsColumns.allPrice;this.$nextTick((function(){t.form.setFieldsValue({changeAmount:a,getAmount:a,backAmount:0})}))},onChangeGetAmount:function(e){var t=this,a=e.target.value,i=this.form.getFieldValue("changeAmount")-0,r=(a-i).toFixed(2)-0;this.$nextTick((function(){t.form.setFieldsValue({backAmount:r})}))}}},N=L,O=(a("3371"),a("e607")),S=Object(O["a"])(N,i,r,!1,null,"7750e9bb",null);t["default"]=S.exports},4835:function(e,t,a){},"58b1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"30%",height:"35%"},attrs:{title:e.title,width:500,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"batchSetDepot"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["depotId",e.validatorRules.depotId],expression:"[ 'depotId', validatorRules.depotId ]"}],attrs:{placeholder:"请选择仓库",showSearch:"",optionFilterProp:"children"}},e._l(e.depotList,(function(a,i){return t("a-select-option",{attrs:{value:a.id}},[e._v("\n              "+e._s(a.depotName)+"\n            ")])})),1)],1)],1)],1)],2)],1)},r=[],o=a("85ee"),l=a.n(o),n=a("0fea"),s=a("ac0d"),d={name:"BatchSetDepot",mixins:[s["b"]],data:function(){return{title:"操作",visible:!1,model:{},depotList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{depotId:{rules:[{required:!0,message:"请选择仓库!"}]}}}},created:function(){},methods:{getDepotData:function(){var e=this;Object(n["c"])("/depot/findDepotByCurrentUser").then((function(t){200===t.code?e.depotList=t.data:e.$message.info(t.data)}))},add:function(){this.edit({}),this.getDepotData()},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"depotId"))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r=Object.assign(e.model,i),o=r.depotId;t.$emit("ok",o),t.confirmLoading=!1,t.close()}}))},handleCancel:function(){this.close()}}},c=d,m=a("e607"),u=Object(m["a"])(c,i,r,!1,null,"54ab67bc",null);t["default"]=u.exports},"790b":function(e,t,a){},"85ee":function(e,t,a){(function(t){var a=1/0,i=9007199254740991,r="[object Arguments]",o="[object Function]",l="[object GeneratorFunction]",n="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,c=s||d||Function("return this")();function m(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function u(e,t){var a=-1,i=e?e.length:0,r=Array(i);while(++a<i)r[a]=t(e[a],a,e);return r}function p(e,t){var a=-1,i=t.length,r=e.length;while(++a<i)e[r+a]=t[a];return e}var f=Object.prototype,h=f.hasOwnProperty,v=f.toString,b=c.Symbol,g=f.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function C(e,t,a,i,r){var o=-1,l=e.length;a||(a=N),r||(r=[]);while(++o<l){var n=e[o];t>0&&a(n)?t>1?C(n,t-1,a,i,r):p(r,n):i||(r[r.length]=n)}return r}function x(e,t){return e=Object(e),k(e,t,(function(t,a){return a in e}))}function k(e,t,a){var i=-1,r=t.length,o={};while(++i<r){var l=t[i],n=e[l];a(n,l)&&(o[l]=n)}return o}function L(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,i=-1,r=w(a.length-t,0),o=Array(r);while(++i<r)o[i]=a[t+i];i=-1;var l=Array(t+1);while(++i<t)l[i]=a[i];return l[t]=o,m(e,this,l)}}function N(e){return T(e)||S(e)||!!(y&&e&&e[y])}function O(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function S(e){return A(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==r)}var T=Array.isArray;function _(e){return null!=e&&j(e.length)&&!I(e)}function A(e){return D(e)&&_(e)}function I(e){var t=F(e)?v.call(e):"";return t==o||t==l}function j(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return!!e&&"object"==typeof e}function $(e){return"symbol"==typeof e||D(e)&&v.call(e)==n}var M=L((function(e,t){return null==e?{}:x(e,u(C(t,1),O))}));e.exports=M}).call(this,a("2409"))},cf74:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"},attrs:{id:e.containerId}},[t("div",{staticClass:"movety-container",staticStyle:{padding:"0 8px",position:"absolute","z-index":"91",height:"32px",width:"104px","text-align":"center"},style:{top:e.top+"px",left:e.left+"px",display:e.moveDisplay}},[t("div",{class:e.showMoverTask?"uploadty-mover-mask":"movety-opt",staticStyle:{"margin-top":"12px"},attrs:{id:e.containerId+"-mover"}},[t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveLast}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-left"}})],1),t("a",{staticStyle:{margin:"0 5px"},on:{click:e.moveNext}},[t("a-icon",{staticStyle:{color:"#fff","font-size":"16px"},attrs:{type:"arrow-right"}})],1)])]),t("a-upload",{class:{"uploadty-disabled":e.disabled},attrs:{name:"file",multiple:!0,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,returnUrl:e.returnUrl,listType:e.complistType},on:{change:e.handleChange,preview:e.handlePreview}},[[e.isImageComp?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1):e.buttonVisible?t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(e._s(e.text)+"\n      ")],1):e._e()]],2),t("a-modal",{attrs:{visible:e.previewVisible,width:1e3,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},r=[],o=a("1f37"),l=a("9fb0"),n=a("0fea"),s=a("4ec3"),d="all",c="image",m=function(){return"-"+parseInt(1e4*Math.random()+1,10)},u=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},p={name:"JUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",headers:{},fileList:[],newFileList:[],uploadGoOn:!0,previewVisible:!1,previewImage:"",containerId:"",top:"",left:"",moveDisplay:"none",showMoverTask:!1,moverHold:!1,currentImg:"",sizeLimit:0}},props:{text:{type:String,required:!1,default:"点击上传"},fileType:{type:String,required:!1,default:d},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},triggerChange:{type:Boolean,required:!1,default:!1},returnUrl:{type:Boolean,required:!1,default:!0},number:{type:Number,required:!1,default:0},buttonVisible:{type:Boolean,required:!1,default:!0}},watch:{value:{immediate:!0,handler:function(){var e=this.value;e instanceof Array?this.returnUrl?this.initFileList(e.join(",")):this.initFileListArr(e):this.initFileList(e)}}},computed:{isImageComp:function(){return this.fileType===c},complistType:function(){return this.fileType===c?"picture-card":"text"}},created:function(){this.initFileSizeLimit();var e=o["a"].ls.get(l["a"]);this.headers={"X-Access-Token":e},this.containerId="container-ty-"+(new Date).getTime()},methods:{initFileSizeLimit:function(){var e=this;Object(s["T"])().then((function(t){200===t.code&&(e.sizeLimit=t.data)}))},initFileListArr:function(e){if(e&&0!=e.length){for(var t=[],a=0;a<e.length;a++){var i=Object(n["d"])(e[a].filePath);t.push({uid:m(),name:e[a].fileName,status:"done",url:i,response:{code:"history",data:e[a].filePath}})}this.fileList=t}else this.fileList=[]},initFileList:function(e){if(e&&0!=e.length){for(var t=[],a=e.split(","),i=0;i<a.length;i++){var r=Object(n["d"])("systemConfig/static/"+a[i]);t.push({uid:m(),name:u(a[i]),status:"done",url:r,response:{code:"history",data:a[i]}})}this.fileList=t}else this.fileList=[]},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");for(var a=[],i=0;i<e.length;i++)a.push(e[i].response.data);a.length>0&&(t=a.join(",")),this.$emit("change",t)},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type,a=e.size;if(this.fileType===c&&t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(a>this.sizeLimit){var i=(this.sizeLimit/1024/1024).toFixed(2);return this.$message.warning("抱歉，文件大小不能超过"+i+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop();var t=e.fileList;if("done"===e.file.status?(this.number>0&&(t=t.slice(-this.number)),200===e.file.response.code&&(t=t.map((function(e){if(e.response){var t=e.response.data;e.url=Object(n["d"])(t)}return e})))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"===e.file.status||"removed"===e.file.status)if(this.returnUrl)this.handlePathChange();else{this.newFileList=[];for(var a=0;a<t.length;a++){var i={fileName:t[a].name,filePath:t[a].response.data,fileSize:t[a].size};this.newFileList.push(i)}this.$emit("change",this.newFileList)}},handleDelete:function(e){},handlePreview:function(e){var t=e.name.substring(e.name.indexOf("."));".gif"===t||".jpg"===t||".jpeg"===t||".png"===t||".GIF"===t||".JPG"===t||".JPEG"===t||".PNG"===t?(this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0):location.href=e.url},handleCancel:function(){this.previewVisible=!1},moveLast:function(){var e=this.getIndexByUrl();if(0==e)this.$message.warn("未知的操作");else{for(var t=this.fileList[e].url,a=this.fileList[e-1].url,i=[],r=0;r<this.fileList.length;r++)r==e-1?i.push(t):r==e?i.push(a):i.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",i.join(","))}},moveNext:function(){var e=this.getIndexByUrl();if(e==this.fileList.length-1)this.$message.warn("已到最后~");else{for(var t=this.fileList[e].url,a=this.fileList[e+1].url,i=[],r=0;r<this.fileList.length;r++)r==e+1?i.push(t):r==e?i.push(a):i.push(this.fileList[r].url);this.currentImg=a,this.$emit("change",i.join(","))}},getIndexByUrl:function(){for(var e=0;e<this.fileList.length;e++)if(this.fileList[e].url===this.currentImg||encodeURI(this.fileList[e].url)===this.currentImg)return e;return-1}},mounted:function(){var e=this,t=document.getElementById(this.containerId+"-mover");t.addEventListener("mouseover",(function(){e.moverHold=!0,e.moveDisplay="block"})),t.addEventListener("mouseout",(function(){e.moverHold=!1,e.moveDisplay="none"}));var a=document.getElementById(this.containerId)?document.getElementById(this.containerId).getElementsByClassName("ant-upload-list-picture-card"):[];a&&a.length>0&&(a[0].addEventListener("mouseover",(function(t){t=t||window.event;var a=t.target||t.srcElement;if("ant-upload-list-item-info"==a.className){e.showMoverTask=!1;var i=a.parentElement;e.left=i.offsetLeft,e.top=i.offsetTop+i.offsetHeight-50,e.moveDisplay="block",e.currentImg=a.getElementsByTagName("img")[0].src}})),a[0].addEventListener("mouseout",(function(t){t=t||window.event;var a=t.target||t.srcElement;"ant-upload-list-item-info"==a.className&&(e.showMoverTask=!0,setTimeout((function(){!1===e.moverHold&&(e.moveDisplay="none")}),100)),"ant-upload-list-item ant-upload-list-item-done"!=a.className&&"ant-upload-list ant-upload-list-picture-card"!=a.className||(e.moveDisplay="none")})))},model:{prop:"value",event:"change"}},f=p,h=(a("3d9e"),a("e607")),v=Object(h["a"])(f,i,r,!1,null,null,null);t["default"]=v.exports},d816:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"15%",height:"60%"},attrs:{title:e.title,width:1200,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"memberModal"}},[t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"会员卡号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["supplier",e.validatorRules.supplier],expression:"[ 'supplier', validatorRules.supplier]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入会员卡号"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"联系人"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["contacts"],expression:"[ 'contacts' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入联系人"}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机号码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["telephone"],expression:"[ 'telephone' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入手机号码"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"联系电话"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["phoneNum"],expression:"[ 'phoneNum' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入联系电话"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"电子邮箱"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["email"],expression:"[ 'email' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入电子邮箱"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["description"],expression:"[ 'description' ]",modifiers:{trim:!0}}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],1)],1)],2)],1)},r=[],o=a("85ee"),l=a.n(o),n=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"MemberModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{supplier:{rules:[{required:!0,message:"请输入会员卡号!"},{min:2,max:60,message:"长度在 2 到 60 个字符",trigger:"blur"},{validator:this.validateSupplierName}]}}}},created:function(){},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"supplier","contacts","telephone","email","phoneNum","sort","description")),Object(s["a"])("memberModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r,o=Object.assign(e.model,i);if(e.model.beginNeedGet&&e.model.beginNeedPay)return t.$message.warn("期初应收和期初应付不能同时输入"),void(t.confirmLoading=!1);o.type="会员",r=e.model.id?Object(n["N"])(o):Object(n["i"])(o),r.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateSupplierName:function(e,t,a){var i={name:t,type:"会员",id:this.model.id?this.model.id:0};Object(n["B"])(i).then((function(e){e&&200===e.code?e.data.status?a("会员卡号已经存在"):a():a(e.data)}))}}},m=c,u=a("e607"),p=Object(u["a"])(m,i,r,!1,null,"5f14cc22",null);t["default"]=p.exports},e561:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"10%",height:"70%"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"depotModal"}},[t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["name",e.validatorRules.name],expression:"[ 'name', validatorRules.name]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库名称"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库地址"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["address"],expression:"[ 'address' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓库地址"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓储费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["warehousing"],expression:"[ 'warehousing' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入仓储费",suffix:"元/天/KG"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"搬运费"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["truckage"],expression:"[ 'truckage' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入搬运费",suffix:"元"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"负责人"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["principal"],expression:"[ 'principal' ]"}],attrs:{placeholder:"选择负责人",dropdownMatchSelectWidth:!1}},e._l(e.userList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v("\n              "+e._s(a.userName)+"\n            ")])})),1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sort"],expression:"[ 'sort' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["remark"],expression:"[ 'remark' ]",modifiers:{trim:!0}}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],2)],1)},r=[],o=a("85ee"),l=a.n(o),n=a("4ec3"),s=a("ca00"),d=a("ac0d"),c={name:"DepotModal",mixins:[d["b"]],data:function(){return{title:"操作",visible:!1,model:{},maskStyle:"",userList:[],isReadOnly:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),validatorRules:{name:{rules:[{required:!0,message:"请输入仓库名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"},{validator:this.validateDepotName}]}}}},created:function(){this.initUser()},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(l()(t.model,"name","address","warehousing","truckage","principal","sort","remark")),Object(s["a"])("depotModal")}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,i){if(!a){t.confirmLoading=!0;var r,o=Object.assign(e.model,i);r=e.model.id?Object(n["F"])(o):Object(n["b"])(o),r.then((function(e){200===e.code?t.$emit("ok"):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}}))},handleCancel:function(){this.close()},validateDepotName:function(e,t,a){var i={name:t,id:this.model.id?this.model.id:0};Object(n["q"])(i).then((function(e){e&&200===e.code?e.data.status?a("名称已经存在"):a():a(e.data)}))},initUser:function(){var e=this;Object(n["qb"])({}).then((function(t){t&&(e.userList=t)}))}}},m=c,u=a("e607"),p=Object(u["a"])(m,i,r,!1,null,"07631d0c",null);t["default"]=p.exports}}]);