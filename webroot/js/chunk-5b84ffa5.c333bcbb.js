(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b84ffa5","chunk-34cb347e","chunk-2d0b16d0"],{2095:function(e,t,r){"use strict";r.r(t);var n,a,o={name:"Ellipsis",props:{prefixCls:{type:String,default:"ant-pro-ellipsis"},tooltip:{type:Boolean,default:!0},length:{type:Number,default:25},lines:{type:Number,default:1},fullWidthRecognition:{type:Boolean,default:!1}},methods:{},render:function(){var e=this.$props;e.tooltip,e.length;this.$slots.default&&this.$slots.default.map((function(e){return e.text})).join("")}},i=o,l=r("e607"),u=Object(l["a"])(i,n,a,!1,null,null,null);t["default"]=u.exports},b16a:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{centered:"",title:e.name+"选择",width:e.width,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.close}},[t("a-row",{attrs:{gutter:18}},[t("a-col",{attrs:{span:16}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:14}},[t("a-form-item",{attrs:{label:e.queryParamText||e.name}},[t("a-input",{attrs:{placeholder:"请输入"+(e.queryParamText||e.name)},on:{pressEnter:e.searchQuery},model:{value:e.queryParam[e.queryParamCode||e.valueKey],callback:function(t){e.$set(e.queryParam,e.queryParamCode||e.valueKey,t)},expression:"queryParam[queryParamCode||valueKey]"}})],1)],1),t("a-col",{attrs:{span:8}},[t("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[t("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),t("a-table",{attrs:{size:"small",bordered:"",rowKey:e.rowKey,columns:e.innerColumns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,scroll:{y:240},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,type:e.multiple?"checkbox":"radio"},customRow:e.customRowFn},on:{change:e.handleTableChange}})],1),t("a-col",{attrs:{span:8}},[t("a-card",{attrs:{title:"已选"+e.name,bordered:!1,"head-style":{padding:0},"body-style":{padding:0}}},[t("a-table",e._b({attrs:{size:"small",rowKey:e.rowKey,bordered:""},scopedSlots:e._u([{key:"action",fn:function(r,n,a){return t("span",{},[t("a",{on:{click:function(t){return e.handleDeleteSelected(n,a)}}},[e._v("删除")])])}}])},"a-table",e.selectedTable,!1))],1)],1)],1)],1)},a=[],o=r("0fea"),i=r("c4db"),l=r("b65a"),u=r("ca00");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=d(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t=m(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=b(e,"string");return"symbol"===s(t)?t:String(t)}function b(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v={name:"JSelectBizComponentModal",mixins:[l["a"]],components:{Ellipsis:i["default"]},props:{value:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},valueKey:{type:String,required:!0},multiple:{type:Boolean,default:!0},width:{type:Number,default:900},name:{type:String,default:""},listUrl:{type:String,required:!0,default:""},valueUrl:{type:String,default:""},displayKey:{type:String,default:null},columns:{type:Array,required:!0,default:function(){return[]}},queryParamCode:{type:String,default:null},queryParamText:{type:String,default:null},rowKey:{type:String,default:"id"},ellipsisLength:{type:Number,default:12}},data:function(){var e=this,t=this.$createElement;return{innerValue:[],selectedTable:{pagination:!1,scroll:{y:240},columns:[y(y({},this.columns[0]),{},{width:this.columns[0].widthRight||this.columns[0].width}),{title:"操作",dataIndex:"action",align:"center",width:60,scopedSlots:{customRender:"action"}}],dataSource:[]},renderEllipsis:function(r){return t("ellipsis",{attrs:{length:e.ellipsisLength}},[r])},url:{list:this.listUrl},ipagination:{current:1,pageSize:5,pageSizeOptions:["5","10","20","30"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},options:[],dataSourceMap:{}}},computed:{innerColumns:function(){var e=this,t=Object(u["c"])(this.columns);return t.forEach((function(t){-1!==e.ellipsisLength&&(t.customRender=function(t){return e.renderEllipsis(t)})})),t}},watch:{value:{deep:!0,immediate:!0,handler:function(e){this.innerValue=Object(u["c"])(e),this.selectedRowKeys=[],this.valueWatchHandler(e),this.queryOptionsByValue(e)}},dataSource:{deep:!0,handler:function(e){this.emitOptions(e),this.valueWatchHandler(this.innerValue)}},selectedRowKeys:{immediate:!0,deep:!0,handler:function(e){var t=this;this.selectedTable.dataSource=e.map((function(e){var r,n=c(t.dataSource);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a[t.rowKey]===e)return Object(u["m"])(t.innerValue,a[t.valueKey]),a}}catch(s){n.e(s)}finally{n.f()}var o,i=c(t.selectedTable.dataSource);try{for(i.s();!(o=i.n()).done;){var l=o.value;if(l[t.rowKey]===e)return Object(u["m"])(t.innerValue,l[t.valueKey]),l}}catch(s){i.e(s)}finally{i.f()}return{}}))}}},methods:{close:function(){this.$emit("update:visible",!1)},valueWatchHandler:function(e){var t=this;e.forEach((function(e){t.dataSource.concat(t.selectedTable.dataSource).forEach((function(r){r[t.valueKey]===e&&Object(u["m"])(t.selectedRowKeys,r[t.rowKey])}))}))},queryOptionsByValue:function(e){var t,r=this;if(e&&0!==e.length){var n,a=!1,i=c(e);try{for(i.s();!(n=i.n()).done;){var l,s=n.value,d=!1,f=c(this.options);try{for(f.s();!(l=f.n()).done;){var p=l.value;if(s===p.value){d=!0;break}}}catch(y){f.e(y)}finally{f.f()}if(!d){a=!0;break}}}catch(y){i.e(y)}finally{i.f()}a&&Object(o["c"])(this.valueUrl||this.listUrl,(t={},h(t,this.valueKey,e.join(",")+","),h(t,"pageNo",1),h(t,"pageSize",e.length),t)).then((function(e){if(e.success){var t=e.result;t instanceof Array||(t=e.result.records),r.emitOptions(t,(function(e){Object(u["m"])(r.innerValue,e[r.valueKey]),Object(u["m"])(r.selectedRowKeys,e[r.rowKey]),Object(u["m"])(r.selectedTable.dataSource,e,r.rowKey)}))}}))}},emitOptions:function(e,t){var r=this;e.forEach((function(e){var n=e[r.valueKey];r.dataSourceMap[n]=e,Object(u["m"])(r.options,{label:e[r.displayKey||r.valueKey],value:n},"value"),"function"===typeof t&&t(e)})),this.$emit("options",this.options,this.dataSourceMap)},handleOk:function(){var e=this,t=this.selectedTable.dataSource.map((function(t){return t[e.valueKey]}));this.$emit("input",t),this.close()},handleDeleteSelected:function(e,t){this.selectedRowKeys.splice(this.selectedRowKeys.indexOf(e[this.rowKey]),1),this.selectedTable.dataSource.splice(t,1)},customRowFn:function(e){var t=this;return{on:{click:function(){var r=e[t.rowKey];if(t.multiple){var n=t.selectedRowKeys.indexOf(r);-1===n?(t.selectedRowKeys.push(r),t.selectedTable.dataSource.push(e)):t.handleDeleteSelected(e,n)}else t.selectedRowKeys=[r],t.selectedTable.dataSource=[e]}}}}}},w=v,g=r("e607"),S=Object(g["a"])(w,n,a,!1,null,"2c48e243",null);t["default"]=S.exports},c4db:function(e,t,r){"use strict";r.r(t);var n=r("2095");t["default"]=n["default"]}}]);