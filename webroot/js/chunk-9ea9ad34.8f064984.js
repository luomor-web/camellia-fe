(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ea9ad34"],{2004:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("a-modal",{staticStyle:{top:"12%",height:"90%","overflow-y":"hidden"},attrs:{width:t.modalWidth,visible:t.visible,title:t.title,cancelText:"关闭",wrapClassName:"ant-modal-cust-warp"},on:{ok:t.handleSubmit,cancel:t.close}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("div",[e("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onAdd.apply(null,arguments)}}},[e("a-tabs",{attrs:{"default-active-key":"1","tab-position":"left"}},[e("a-tab-pane",{key:"1",attrs:{tab:"单个序列号",forceRender:""}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"序列号"}},[e("a-input",{ref:"name",staticStyle:{width:"400px"},attrs:{placeholder:"请输入序列号并回车"},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}}),e("div",{staticStyle:{float:"left"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.onAdd}},[t._v("添加")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.clearAllSn}},[t._v("清空")])],1)],1)],1)],1)],1),e("a-tab-pane",{key:"2",attrs:{tab:"多个序列号",forceRender:""}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-form-item",{attrs:{labelCol:t.labelCol,wrapperCol:t.wrapperCol,label:"序列号"}},[e("a-textarea",{staticStyle:{width:"400px"},attrs:{placeholder:"多个序列号用逗号隔开，请少于100个字符","auto-size":{minRows:2,maxRows:4}},model:{value:t.queryParam.multiName,callback:function(e){t.$set(t.queryParam,"multiName",e)},expression:"queryParam.multiName"}}),e("div",{staticStyle:{float:"left"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.onBatchAdd}},[t._v("批量添加")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.clearAllSn}},[t._v("清空")])],1)],1)],1)],1)],1)],1)],1)],1)])],1),e("a-row",{staticStyle:{padding:"10px"},attrs:{gutter:10}},[e("a-col",{attrs:{md:24,sm:24}},[e("a-table",{ref:"table",attrs:{scroll:t.scrollTrigger,size:"middle",rowKey:"id",columns:t.columns,dataSource:t.checkDataSource,pagination:!1,loading:t.loading},scopedSlots:t._u([{key:"action",fn:function(a,r){return e("span",{},[e("a",{on:{click:function(e){return t.removeSn(r)}}},[t._v("移除")])])}}])})],1)],1)],1)},i=[],s=a("b65a"),l={name:"JSelectSnAddModal",mixins:[s["a"]],components:{},props:["rows","multi","barCode"],data:function(){return{modalWidth:800,queryParam:{name:"",multiName:""},labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:18}},categoryTree:[],columns:[{dataIndex:"serialNumber",title:"已录入的序列号",width:100,align:"left"},{tdataIndex:"action",title:"操作",align:"center",width:50,scopedSlots:{customRender:"action"}}],scrollTrigger:{y:460},checkDataSource:[],selectedRowKeys:[],selectRows:[],selectIds:[],title:"录入序列号",visible:!1,form:this.$form.createForm(this),disableMixinCreated:!0,loading:!1}},computed:{getType:function(){return 1==this.multi?"checkbox":"radio"}},watch:{barCode:{immediate:!0,handler:function(){this.initBarCode()}}},methods:{initBarCode:function(){this.barCode?this.$emit("initComp",this.barCode):this.$emit("initComp","")},showModal:function(){var t=this;if(this.visible=!0,this.$nextTick((function(){return t.$refs.name.focus()})),this.form.resetFields(),this.rows){this.checkDataSource=[];for(var e=JSON.parse(this.rows),a=e.snList.split(","),r=0;r<a.length;r++){var i={id:a[r],serialNumber:a[r]};this.checkDataSource.push(i)}}},clearAllSn:function(){this.checkDataSource=[]},close:function(){this.visible=!1},handleSubmit:function(){var t=this;this.getSelectRows(),t.$emit("ok",t.selectRows,t.selectIds),t.close()},removeSn:function(t){for(var e=this.checkDataSource,a=[],r=0;r<e.length;r++)e[r].id!==t.id&&a.push(e[r]);this.checkDataSource=a},getSelectRows:function(){var t="";this.selectRows=this.checkDataSource;for(var e=this.checkDataSource,a=0;a<e.length;a++)t=t+","+e[a].serialNumber;this.selectIds=t.substring(1)},onAdd:function(){if(this.queryParam.name){for(var t={id:this.queryParam.name,serialNumber:this.queryParam.name},e=this.checkDataSource,a=!1,r=0;r<e.length;r++)e[r].serialNumber===this.queryParam.name&&(a=!0);a?this.$message.warning("抱歉，此序列号已经添加过！"):(this.checkDataSource.push(t),this.queryParam.name="")}},onBatchAdd:function(){if(this.queryParam.multiName){this.queryParam.multiName=this.queryParam.multiName.replaceAll("，",",");for(var t=this.queryParam.multiName.split(","),e=0;e<t.length;e++){for(var a={id:t[e],serialNumber:t[e]},r=this.checkDataSource,i=!1,s=0;s<r.length;s++)r[s].serialNumber===t[e]&&(i=!0);if(i)return void this.$message.warning("抱歉，序列号"+t[e]+"已经添加过！");this.checkDataSource.push(a)}this.queryParam.multiName=""}}}},o=l,n=(a("4742"),a("e607")),c=Object(n["a"])(o,r,i,!1,null,null,null);e["default"]=c.exports},4742:function(t,e,a){"use strict";a("4f7e")},"4f7e":function(t,e,a){}}]);