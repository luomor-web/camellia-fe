(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da3e1"],{"6b87":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("a-table",t._g(t._b({attrs:{rowKey:t.rowKey,columns:t.columns,dataSource:t.dataSource,expandedRowKeys:t.expandedRowKeys},on:{expand:t.handleExpand,expandedRowsChange:function(e){t.expandedRowKeys=e}},scopedSlots:t._u([t._l(t.slots,(function(e){return{key:e,fn:function(n,r,o){return[t._t(e,null,null,{text:n,record:r,index:o})]}}}))],null,!0)},"a-table",t.tableAttrs,!1),t.$listeners))},o=[],i=n("0fea");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e,n){return e=l(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=s(t,"string");return"symbol"===a(e)?e:String(e)}function s(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=d(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var y={name:"JTreeTable",props:{rowKey:{type:String,default:"id"},queryKey:{type:String,default:"parentId"},queryParams:{type:Object,default:function(){return{}}},topValue:{type:String,default:null},columns:{type:Array,required:!0},url:{type:String,required:!0},childrenUrl:{type:String,default:null},tableProps:{type:Object,default:function(){return{}}},immediateRequest:{type:Boolean,default:!0},condition:{type:String,default:"",required:!1}},data:function(){return{dataSource:[],expandedRowKeys:[]}},computed:{getChildrenUrl:function(){return this.childrenUrl?this.childrenUrl:this.url},slots:function(){var t,e=[],n=c(this.columns);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.scopedSlots&&r.scopedSlots.customRender&&e.push(r.scopedSlots.customRender)}}catch(o){n.e(o)}finally{n.f()}return e},tableAttrs:function(){return Object.assign(this.$attrs,this.tableProps)}},watch:{queryParams:{deep:!0,handler:function(){this.loadData()}}},created:function(){this.immediateRequest&&this.loadData()},methods:{loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.topValue,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.url;this.$emit("requestBefore",{first:n}),n&&(this.expandedRowKeys=[]);var o=Object.assign({},this.queryParams||{});return o[this.queryKey]=e,this.condition&&this.condition.length>0&&(o["condition"]=this.condition),Object(i["c"])(r,o).then((function(e){var r=[];if(e.result instanceof Array)r=e.result;else{if(!(e.result.records instanceof Array))throw"返回数据类型不识别";r=e.result.records}var o=r.map((function(e){if(!0===e.hasChildren){var n,r,o,i=c(t.columns);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(r=a.dataIndex,r)break}}catch(s){i.e(s)}finally{i.f()}var l=(n={id:"".concat(e.id,"_loadChild")},u(n,r,"loading..."),u(n,"isLoading",!0),n);e.children=[l]}return e}));return n&&(t.dataSource=o),t.$emit("requestSuccess",{first:n,dataSource:o,res:e}),Promise.resolve(o)})).finally((function(){return t.$emit("requestFinally",{first:n})}))},handleExpand:function(t,e){t&&!0===e.children[0].isLoading&&this.loadData(e.id,!1,this.getChildrenUrl).then((function(t){0===t.length?e.children=null:e.children=t}))}}},h=y,p=n("e607"),m=Object(p["a"])(h,r,o,!1,null,"ba3bd2be",null);e["default"]=m.exports}}]);