(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8603eca","chunk-2d0ab2e6"],{"13d2":function(e,l,a){"use strict";a.r(l);var t=function(){var e=this,l=e._self._c;return l("a-select",{attrs:{value:e.arrayValue,mode:"multiple",placeholder:e.placeholder},on:{change:e.onChange}},e._l(e.options,(function(a,t){return l("a-select-option",{key:t,attrs:{value:a.value}},[e._v("\n    "+e._s(a.text||a.label)+"\n  ")])})),1)},r=[],o={name:"JSelectMultiple",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},readOnly:{type:Boolean,required:!1,default:!1},options:{type:Array,required:!0},triggerChange:{type:Boolean,required:!1,default:!1}},data:function(){return{arrayValue:this.value?this.value.split(","):[]}},watch:{value:function(e){this.arrayValue=e?this.value.split(","):[]}},methods:{onChange:function(e){this.triggerChange?this.$emit("change",e.join(",")):this.$emit("input",e.join(","))}}},i=o,n=a("e607"),c=Object(n["a"])(i,t,r,!1,null,null,null);l["default"]=c.exports},"279b":function(e,l,a){"use strict";a.r(l);var t=function(){var e=this,l=e._self._c;return l("a-card",{style:e.cardStyle,attrs:{bordered:!1}},[l("a-spin",{attrs:{spinning:e.confirmLoading}},[l("a-form",{attrs:{form:e.form,id:"systemConfigModal"}},[l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"公司名称"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyName",e.validatorRules.companyName],expression:"[ 'companyName', validatorRules.companyName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入公司名称"}})],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"联系人"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyContacts"],expression:"[ 'companyContacts' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入联系人"}})],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"公司地址"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyAddress"],expression:"[ 'companyAddress' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入公司地址"}})],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"公司电话"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyTel"],expression:"[ 'companyTel' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入公司电话"}})],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"公司传真"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyFax"],expression:"[ 'companyFax' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入公司传真"}})],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"公司邮编"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["companyPostCode"],expression:"[ 'companyPostCode' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入公司邮编"}})],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"销售协议"}},[l("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["saleAgreement",e.validatorRules.saleAgreement],expression:"[ 'saleAgreement', validatorRules.saleAgreement ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入销售协议"}})],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}})],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"仓库权限"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onDepotChange},model:{value:e.depotFlagSwitch,callback:function(l){e.depotFlagSwitch=l},expression:"depotFlagSwitch"}}),e._v("\n            （如果启用则需要到"),l("b",[e._v("用户管理")]),e._v("进行"),l("b",[e._v("分配仓库")]),e._v("）\n          ")],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"客户权限"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onCustomerChange},model:{value:e.customerFlagSwitch,callback:function(l){e.customerFlagSwitch=l},expression:"customerFlagSwitch"}}),e._v("\n            （如果启用则需要到"),l("b",[e._v("用户管理")]),e._v("进行"),l("b",[e._v("分配客户")]),e._v("）\n          ")],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"支持负库存"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onMinusStockChange},model:{value:e.minusStockFlagSwitch,callback:function(l){e.minusStockFlagSwitch=l},expression:"minusStockFlagSwitch"}}),e._v("\n            （如果启用则单据"),l("b",[e._v("支持负库存")]),e._v("录入）\n          ")],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"以销定购"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onPurchaseBySaleChange},model:{value:e.purchaseBySaleFlagSwitch,callback:function(l){e.purchaseBySaleFlagSwitch=l},expression:"purchaseBySaleFlagSwitch"}}),e._v("\n            （如果启用则根据"),l("b",[e._v("销售订单")]),e._v("来定制"),l("b",[e._v("采购订单")]),e._v("，进货后再发给客户）\n          ")],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"超出关联单据"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onOverLinkBillChange},model:{value:e.overLinkBillFlagSwitch,callback:function(l){e.overLinkBillFlagSwitch=l},expression:"overLinkBillFlagSwitch"}}),e._v("\n            （如果启用则允许当前单据"),l("b",[e._v("超出关联单据")]),e._v("的商品数量进行出入库）\n          ")],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"更新单价"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onUpdateUnitPriceChange},model:{value:e.updateUnitPriceFlagSwitch,callback:function(l){e.updateUnitPriceFlagSwitch=l},expression:"updateUnitPriceFlagSwitch"}}),e._v("\n            （如果启用则会根据单据录入自动更新商品单价，默认是启用状态）\n          ")],1)],1)],1),l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"强审核"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onForceApprovalChange},model:{value:e.forceApprovalFlagSwitch,callback:function(l){e.forceApprovalFlagSwitch=l},expression:"forceApprovalFlagSwitch"}}),e._v("\n            （如果启用则只有"),l("b",[e._v("已审核")]),e._v("的单据才生效，涉及库存和报表，需批量修正库存）\n          ")],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}})],1),e.isShowApproval?l("a-row",{staticClass:"form-row",attrs:{gutter:24}},[l("a-col",{attrs:{lg:12,md:12,sm:24}},[l("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"多级审核"}},[l("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"关闭"},on:{change:e.onMultiLevelApprovalChange},model:{value:e.multiLevelApprovalFlagSwitch,callback:function(l){e.multiLevelApprovalFlagSwitch=l},expression:"multiLevelApprovalFlagSwitch"}}),l("a-select",{staticStyle:{width:"400px","padding-left":"10px"},attrs:{placeholder:"请选择流程类型",mode:"multiple",maxTagCount:6,dropdownMatchSelectWidth:!1,showSearch:"","allow-clear":"",optionFilterProp:"children"},model:{value:e.multiBillTypeSelect,callback:function(l){e.multiBillTypeSelect=l},expression:"multiBillTypeSelect"}},e._l(e.billTypeList,(function(a,t){return l("a-select-option",{key:t,attrs:{value:a.key}},[e._v("\n                "+e._s(a.value)+"\n              ")])})),1),l("br"),e._v("（如果启用多级审核，则需配置流程，开启会自动刷新浏览器）\n          ")],1)],1),l("a-col",{attrs:{lg:12,md:12,sm:24}})],1):e._e()],1)],1),l("a-row",{attrs:{gutter:24}},[l("a-col",{attrs:{md:24,align:"middle"}},[l("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("保存")]),l("a-button",{staticStyle:{"margin-left":"20px"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)},r=[],o=a("85ee"),i=a.n(o),n=a("13d2"),c=a("4ec3"),s=a("ca00"),u=a("0fea"),p=a("ac0d"),m={name:"SystemConfigList",mixins:[p["b"]],components:{JSelectMultiple:n["default"]},data:function(){return{title:"操作",cardStyle:"",visible:!0,model:{},depotFlagSwitch:!1,customerFlagSwitch:!1,minusStockFlagSwitch:!1,purchaseBySaleFlagSwitch:!1,overLinkBillFlagSwitch:!1,updateUnitPriceFlagSwitch:!0,forceApprovalFlagSwitch:!1,multiLevelApprovalFlagSwitch:!1,originalMultiLevelApprovalFlag:"0",multiBillTypeSelect:[],originalMultiBillTypeSelect:[],isReadOnly:!1,isShowApproval:!1,labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,form:this.$form.createForm(this),billTypeList:[{key:"LSCK",value:"零售出库"},{key:"LSTH",value:"零售退货"},{key:"CGDD",value:"采购订单"},{key:"CGRK",value:"采购入库"},{key:"CGTH",value:"采购退货"},{key:"XSDD",value:"销售订单"},{key:"XSCK",value:"销售出库"},{key:"XSTH",value:"销售退货"},{key:"QTRK",value:"其它入库单"},{key:"QTCK",value:"其它出库单"},{key:"DBCK",value:"调拨出库"},{key:"ZZD",value:"组装单"},{key:"CXD",value:"拆卸单"},{key:"SR",value:"收入单"},{key:"ZC",value:"支出单"},{key:"SK",value:"收款单"},{key:"FK",value:"付款单"},{key:"ZZ",value:"转账单"},{key:"SYF",value:"收预付款单"}],validatorRules:{companyName:{rules:[{required:!0,message:"请输入公司名称!"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}]},saleAgreement:{rules:[{min:2,max:200,message:"长度在 2 到 200 个字符",trigger:"blur"}]}}}},created:function(){this.init(),this.isDesktop()&&(this.cardStyle="height:"+(document.documentElement.clientHeight-125)+"px")},methods:{onDepotChange:function(e){this.model.depotFlag=e?"1":"0"},onCustomerChange:function(e){this.model.customerFlag=e?"1":"0"},onMinusStockChange:function(e){this.model.minusStockFlag=e?"1":"0"},onPurchaseBySaleChange:function(e){this.model.purchaseBySaleFlag=e?"1":"0"},onOverLinkBillChange:function(e){this.model.overLinkBillFlag=e?"1":"0"},onUpdateUnitPriceChange:function(e){this.model.updateUnitPriceFlag=e?"1":"0"},onForceApprovalChange:function(e){this.model.forceApprovalFlag=e?"1":"0"},onMultiLevelApprovalChange:function(e){this.model.multiLevelApprovalFlag=e?"1":"0",e||(this.multiBillTypeSelect=[])},init:function(){var e=this,l={search:{companyName:""},currentPage:1,pageSize:10};Object(u["c"])("/systemConfig/list",l).then((function(l){if(200===l.code){var a=l.data.rows[0];e.form.resetFields(),e.model=Object.assign({},a),e.visible=!0,e.$nextTick((function(){e.form.setFieldsValue(i()(e.model,"companyName","companyContacts","companyAddress","companyTel","companyFax","companyPostCode","saleAgreement")),Object(s["a"])("systemConfigModal")})),a.id&&(null!=a.depotFlag&&(e.depotFlagSwitch="1"==a.depotFlag),null!=a.customerFlag&&(e.customerFlagSwitch="1"==a.customerFlag),null!=a.minusStockFlag&&(e.minusStockFlagSwitch="1"==a.minusStockFlag),null!=a.purchaseBySaleFlag&&(e.purchaseBySaleFlagSwitch="1"==a.purchaseBySaleFlag),null!=a.overLinkBillFlag&&(e.overLinkBillFlagSwitch="1"==a.overLinkBillFlag),null!=a.updateUnitPriceFlag&&(e.updateUnitPriceFlagSwitch="1"==a.updateUnitPriceFlag),null!=a.forceApprovalFlag&&(e.forceApprovalFlagSwitch="1"==a.forceApprovalFlag),null!=a.multiLevelApprovalFlag&&(e.multiLevelApprovalFlagSwitch="1"==a.multiLevelApprovalFlag,e.originalMultiLevelApprovalFlag=a.multiLevelApprovalFlag),null!=a.multiBillType&&""!=a.multiBillType&&(e.multiBillTypeSelect=a.multiBillType.split(","),e.originalMultiBillTypeSelect=a.multiBillType))}else e.$message.info(l.data)})),Object(u["c"])("/plugin/checkByPluginId",{pluginIds:"workflow"}).then((function(l){200===l.code&&l.data&&(e.isShowApproval=!0)})),Object(u["c"])("/plugin/checkByPluginId",{pluginIds:"stock-check"}).then((function(l){200===l.code&&l.data&&(e.billTypeList.push({key:"PDLR",value:"盘点录入"},{key:"PDFP",value:"盘点复盘"}),Object(u["c"])("/plugin/checkByPluginId",{pluginIds:"produce"}).then((function(l){200===l.code&&l.data&&e.billTypeList.push({key:"SC",value:"生产任务"},{key:"WW",value:"委外任务"})})))}))},handleOk:function(){var e=this,l=this;this.form.validateFields((function(a,t){if(!a){l.confirmLoading=!0;var r,o=Object.assign(e.model,t);o.multiBillType=e.multiBillTypeSelect.join(","),r=e.model.id?Object(c["O"])(o):Object(c["j"])(o),r.then((function(a){200===a.code?(e.init(),l.$message.info("保存成功！"),e.originalMultiLevelApprovalFlag==o.multiLevelApprovalFlag&&e.originalMultiBillTypeSelect==o.multiBillType||location.reload()):l.$message.warning(a.data.message)})).finally((function(){l.confirmLoading=!1}))}}))},handleReset:function(){this.form.resetFields(),this.depotFlagSwitch=!1,this.customerFlagSwitch=!1,this.minusStockFlagSwitch=!1,this.purchaseBySaleFlagSwitch=!1,this.overLinkBillFlagSwitch=!1,this.updateUnitPriceFlagSwitch=!0,this.forceApprovalFlagSwitch=!1,this.multiLevelApprovalFlagSwitch=!1,this.multiBillTypeSelect=[]}}},d=m,h=(a("ec26"),a("e607")),g=Object(h["a"])(d,t,r,!1,null,"7d5df650",null);l["default"]=g.exports},"85ee":function(e,l,a){(function(l){var a=1/0,t=9007199254740991,r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",n="[object Symbol]",c="object"==typeof l&&l&&l.Object===Object&&l,s="object"==typeof self&&self&&self.Object===Object&&self,u=c||s||Function("return this")();function p(e,l,a){switch(a.length){case 0:return e.call(l);case 1:return e.call(l,a[0]);case 2:return e.call(l,a[0],a[1]);case 3:return e.call(l,a[0],a[1],a[2])}return e.apply(l,a)}function m(e,l){var a=-1,t=e?e.length:0,r=Array(t);while(++a<t)r[a]=l(e[a],a,e);return r}function d(e,l){var a=-1,t=l.length,r=e.length;while(++a<t)e[r+a]=l[a];return e}var h=Object.prototype,g=h.hasOwnProperty,v=h.toString,f=u.Symbol,w=h.propertyIsEnumerable,y=f?f.isConcatSpreadable:void 0,C=Math.max;function b(e,l,a,t,r){var o=-1,i=e.length;a||(a=A),r||(r=[]);while(++o<i){var n=e[o];l>0&&a(n)?l>1?b(n,l-1,a,t,r):d(r,n):t||(r[r.length]=n)}return r}function S(e,l){return e=Object(e),F(e,l,(function(l,a){return a in e}))}function F(e,l,a){var t=-1,r=l.length,o={};while(++t<r){var i=l[t],n=e[i];a(n,i)&&(o[i]=n)}return o}function k(e,l){return l=C(void 0===l?e.length-1:l,0),function(){var a=arguments,t=-1,r=C(a.length-l,0),o=Array(r);while(++t<r)o[t]=a[l+t];t=-1;var i=Array(l+1);while(++t<l)i[t]=a[t];return i[l]=o,p(e,this,i)}}function A(e){return _(e)||L(e)||!!(y&&e&&e[y])}function B(e){if("string"==typeof e||N(e))return e;var l=e+"";return"0"==l&&1/e==-a?"-0":l}function L(e){return T(e)&&g.call(e,"callee")&&(!w.call(e,"callee")||v.call(e)==r)}var _=Array.isArray;function x(e){return null!=e&&O(e.length)&&!j(e)}function T(e){return M(e)&&x(e)}function j(e){var l=P(e)?v.call(e):"";return l==o||l==i}function O(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}function P(e){var l=typeof e;return!!e&&("object"==l||"function"==l)}function M(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||M(e)&&v.call(e)==n}var U=k((function(e,l){return null==e?{}:S(e,m(b(l,1),B))}));e.exports=U}).call(this,a("2409"))},9863:function(e,l,a){},ec26:function(e,l,a){"use strict";a("9863")}}]);