(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc924010","chunk-2d225b46"],{"418f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{ref:"container"},[t("a-modal",{staticStyle:{top:"5%",height:"85%"},attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,getContainer:function(){return e.$refs.container},maskStyle:{top:"93px",left:"154px"},wrapClassName:e.wrapClassNameInfo(),mask:e.isDesktop(),maskClosable:!1,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("template",{slot:"footer"},[e.isReadOnly?t("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n        关闭\n      ")]):e._e()],1),t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form,id:"userModal"}},[t("a-form-item",{attrs:{label:"登录名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["loginName",e.validatorRules.loginName],expression:"[ 'loginName', validatorRules.loginName]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入登录名称",readOnly:!!e.model.id,suffix:"初始密码：123456"}})],1),t("a-form-item",{attrs:{label:"用户姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["username",e.validatorRules.username],expression:"[ 'username', validatorRules.username]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入用户姓名"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色"}},["租户"!=e.model.roleName?t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleId",e.validatorRules.roleId],expression:"[ 'roleId', validatorRules.roleId]"}],attrs:{placeholder:"选择角色",dropdownMatchSelectWidth:!1}},e._l(e.roleList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.id}},[e._v("\n              "+e._s(a.name)+"\n            ")])})),1):e._e(),"租户"==e.model.roleName?t("a-col",[t("a-row",[e._v("租户")])],1):e._e()],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"机构"}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgaId"],expression:"[ 'orgaId' ]"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},"allow-clear":"",treeData:e.orgaTree,placeholder:"请选择机构"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"职位"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["position"],expression:"[ 'position' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入职位"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"是否经理"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["leaderFlag"],expression:"[ 'leaderFlag' ]"}],attrs:{placeholder:"请选择是否经理"}},[t("a-select-option",{attrs:{value:"1"}},[e._v("是")]),t("a-select-option",{attrs:{value:"0"}},[e._v("否")])],1)],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"电话号码"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["phonenum"],expression:"[ 'phonenum' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入电话号码"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"电子邮箱"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["email"],expression:"[ 'email' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入电子邮箱"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["userBlngOrgaDsplSeq"],expression:"[ 'userBlngOrgaDsplSeq' ]",modifiers:{trim:!0}}],attrs:{placeholder:"请输入排序"}})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"备注"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"[ 'description' ]"}],attrs:{rows:2,placeholder:"请输入备注"}})],1)],1)],1)],2)],1)},i=[],l=a("85ee"),o=a.n(l),n=a("1f37"),s=a("61fc"),c=a("9fb0"),d=(a("0fea"),a("4ec3"));var u=a("ca00"),p=a("ac0d"),f=a("e610"),m={name:"UserModal",mixins:[p["b"]],components:{JImageUpload:f["default"],JSelectPosition:s["default"]},data:function(){return{title:"操作",visible:!1,modalWidth:800,drawerWidth:700,orgaTree:[],roleList:[],userId:"",isReadOnly:!1,disableSubmit:!1,dateFormat:"YYYY-MM-DD",validatorRules:{loginName:{rules:[{required:!0,message:"请输入登录名称!"}]},username:{rules:[{required:!0,message:"请输入用户姓名!"}]},roleId:{rules:[{required:!0,message:"请选择角色!"}]}},model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},uploadLoading:!1,confirmLoading:!1,headers:{},form:this.$form.createForm(this)}},created:function(){var e=n["a"].ls.get(c["a"]);this.headers={"X-Access-Token":e}},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.loadOrgaData(),this.loadRoleData(),this.form.resetFields(),this.userId=e.id,this.visible=!0,this.model=Object.assign({},e),this.$nextTick((function(){t.form.setFieldsValue(o()(t.model,"loginName","username","roleId","orgaId","position","leaderFlag","phonenum","email","userBlngOrgaDsplSeq","description")),Object(u["a"])("userModal")}))},close:function(){this.$emit("close"),this.visible=!1,this.disableSubmit=!1},handleOk:function(){var e=this,t=this;this.form.validateFields((function(a,r){if(!a){t.confirmLoading=!0;var i,l=Object.assign(e.model,r);e.model.id?i=Object(d["R"])(l):(l.id=e.userId,i=Object(d["l"])(l)),i.then((function(e){200===e.code?(t.$emit("ok"),t.close()):t.$message.warning(e.data.message)})).finally((function(){t.confirmLoading=!1}))}}))},handleCancel:function(){this.close()},loadOrgaData:function(){var e=this,t={id:""};Object(d["ub"])(t).then((function(t){t&&(e.orgaTree=t)}))},loadRoleData:function(){var e=this;Object(d["xb"])({}).then((function(t){t&&(e.roleList=t)}))}}},h=m,v=a("e607"),b=Object(v["a"])(h,r,i,!1,null,"5b9ee453",null);t["default"]=b.exports},"85ee":function(e,t,a){(function(t){var a=1/0,r=9007199254740991,i="[object Arguments]",l="[object Function]",o="[object GeneratorFunction]",n="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function p(e,t){var a=-1,r=e?e.length:0,i=Array(r);while(++a<r)i[a]=t(e[a],a,e);return i}function f(e,t){var a=-1,r=t.length,i=e.length;while(++a<r)e[i+a]=t[a];return e}var m=Object.prototype,h=m.hasOwnProperty,v=m.toString,b=d.Symbol,g=m.propertyIsEnumerable,w=b?b.isConcatSpreadable:void 0,C=Math.max;function y(e,t,a,r,i){var l=-1,o=e.length;a||(a=j),i||(i=[]);while(++l<o){var n=e[l];t>0&&a(n)?t>1?y(n,t-1,a,r,i):f(i,n):r||(i[i.length]=n)}return i}function x(e,t){return e=Object(e),O(e,t,(function(t,a){return a in e}))}function O(e,t,a){var r=-1,i=t.length,l={};while(++r<i){var o=t[r],n=e[o];a(n,o)&&(l[o]=n)}return l}function L(e,t){return t=C(void 0===t?e.length-1:t,0),function(){var a=arguments,r=-1,i=C(a.length-t,0),l=Array(i);while(++r<i)l[r]=a[t+r];r=-1;var o=Array(t+1);while(++r<t)o[r]=a[r];return o[t]=l,u(e,this,o)}}function j(e){return N(e)||S(e)||!!(w&&e&&e[w])}function I(e){if("string"==typeof e||R(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function S(e){return F(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==i)}var N=Array.isArray;function k(e){return null!=e&&M(e.length)&&!_(e)}function F(e){return A(e)&&k(e)}function _(e){var t=U(e)?v.call(e):"";return t==l||t==o}function M(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}function R(e){return"symbol"==typeof e||A(e)&&v.call(e)==n}var D=L((function(e,t){return null==e?{}:x(e,p(y(t,1),I))}));e.exports=D}).call(this,a("2409"))},e610:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-upload",{attrs:{name:"file",listType:"picture-card",multiple:e.isMultiple,action:e.uploadAction,headers:e.headers,data:{biz:e.bizPath},fileList:e.fileList,beforeUpload:e.beforeUpload,disabled:e.disabled,isMultiple:e.isMultiple,showUploadList:e.isMultiple},on:{change:e.handleChange,preview:e.handlePreview}},[!e.isMultiple&&e.picUrl?t("img",{staticStyle:{height:"104px","max-width":"300px"},attrs:{src:e.getAvatarView()}}):t("div",[t("a-icon",{attrs:{type:e.uploadLoading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.text))])],1),t("a-modal",{attrs:{visible:e.previewVisible,width:1e3,footer:null},on:{cancel:function(t){return e.handleCancel()}}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},i=[],l=a("1f37"),o=a("9fb0"),n=a("0fea"),s=a("4ec3"),c=function(){return"-"+parseInt(1e4*Math.random()+1,10)},d=function(e){if(e.lastIndexOf("\\")>=0){var t=new RegExp("\\\\","g");e=e.replace(t,"/")}return e.substring(e.lastIndexOf("/")+1)},u={name:"JImageUpload",data:function(){return{uploadAction:window._CONFIG["domianURL"]+"/systemConfig/upload",uploadLoading:!1,picUrl:!1,headers:{},fileList:[],previewImage:"",previewVisible:!1,sizeLimit:0,uploadGoOn:!0}},props:{text:{type:String,required:!1,default:"上传"},bizPath:{type:String,required:!1,default:"temp"},value:{type:[String,Array],required:!1},disabled:{type:Boolean,required:!1,default:!1},isMultiple:{type:Boolean,required:!1,default:!1}},watch:{value:function(e){e instanceof Array?this.initFileList(e.join(",")):this.initFileList(e)}},created:function(){this.initFileSizeLimit();var e=l["a"].ls.get(o["a"]);this.headers={"X-Access-Token":e}},methods:{initFileSizeLimit:function(){var e=this;Object(s["T"])().then((function(t){200===t.code&&(e.sizeLimit=t.data)}))},initFileList:function(e){if(!e||0==e.length)return this.fileList=[],void(this.picUrl=!1);this.picUrl=!0;for(var t=[],a=e.split(","),r=0;r<a.length;r++){var i=Object(n["d"])("systemConfig/static/"+a[r]);t.push({uid:c(),name:d(a[r]),status:"done",url:i,response:{code:"history",data:a[r]}})}this.fileList=t},beforeUpload:function(e){this.uploadGoOn=!0;var t=e.type,a=e.size;if(t.indexOf("image")<0)return this.$message.warning("请上传图片"),this.uploadGoOn=!1,!1;if(a>this.sizeLimit/10){var r=(this.sizeLimit/1024/1024/10).toFixed(2);return this.$message.warning("抱歉，图片大小不能超过"+r+"M"),this.uploadGoOn=!1,!1}return!0},handleChange:function(e){e.file.status||!1!==this.uploadGoOn||e.fileList.pop(),this.picUrl=!1;var t=e.fileList;"done"===e.file.status?200===e.file.response.code&&(this.picUrl=!0,t=t.map((function(e){return e.response&&(e.url=e.response.data),e}))):"error"===e.file.status?this.$message.error("".concat(e.file.name," 上传失败.")):"removed"===e.file.status&&this.handleDelete(e.file),this.fileList=t,"done"!==e.file.status&&"removed"!==e.file.status||this.handlePathChange()},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},getAvatarView:function(){if(this.fileList.length>0){var e=this.fileList[0].url;return e}},handlePathChange:function(){var e=this.fileList,t="";e&&0!=e.length||(t="");var a=[];if(this.isMultiple)for(var r=0;r<e.length;r++)a.push(e[r].response.data);else a.push(e[e.length-1].response.data);a.length>0&&(t=a.join(",")),this.$emit("change",t)},handleDelete:function(e){},handleCancel:function(){this.close(),this.previewVisible=!1},close:function(){}},model:{prop:"value",event:"change"}},p=u,f=a("e607"),m=Object(f["a"])(p,r,i,!1,null,"15e51f3a",null);t["default"]=m.exports}}]);